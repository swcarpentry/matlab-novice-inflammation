<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Programming with MATLAB: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/swc/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/swc/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/swc/favicon-16x16.png">
<link rel="manifest" href="../favicons/swc/site.webmanifest">
<link rel="mask-icon" href="../favicons/swc/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="../assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="../assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Programming with MATLAB
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Programming with MATLAB
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">FIXME</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with MATLAB
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Working With Variables</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-arrays.html">2. Arrays</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-plotting.html">3. Plotting data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-scripts.html">4. Writing MATLAB Scripts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-loops.html">5. Repeating With Loops</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-cond.html">6. Making Choices</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-func.html">7. Creating Functions</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-defensive.html">8. Defensive Programming</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">FIXME</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro"><p>Content from <a href="01-intro.html">Working With Variables</a></p>
<hr>
<p>Last updated on 2025-01-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/01-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 65 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I store values and do simple calculations with them?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Navigate among important sections of the MATLAB environment.</li>
<li>Assign values to variables.</li>
<li>Identify what type of data is stored in MATLAB arrays.</li>
<li>Read tabular data from a file into a program.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction-to-the-matlab-gui">Introduction to the MATLAB GUI<a class="anchor" aria-label="anchor" href="#introduction-to-the-matlab-gui"></a>
</h2>
<hr class="half-width">
<p>Before we can start programming, we need to know a little about the
MATLAB interface. Using the default setup, the MATLAB desktop contains
several important sections:</p>
<ul>
<li>In the <strong>Command Window</strong> we can execute commands.
Commands are typed after the prompt <code>&gt;&gt;</code> and are
executed immediately after pressing <kbd>Enter</kbd>.</li>
<li>Alternatively, we can open the <strong>Editor</strong>, write our
code and run it all at once. The advantage of this is that we can save
our code and run it again in the same way at a later stage.</li>
<li>The <strong>Workspace</strong> contains all the variables which we
have loaded into memory.</li>
<li>The <strong>Current Folder</strong> window shows files in the
current directory, and we can change the current folder using this
window.</li>
<li>
<strong>Search Documentation</strong> on the top right of your
screen lets you search for functions. Suggestions for functions that
would do what you want to do will pop up. Clicking on them will open the
documentation. Another way to access the documentation is via the
<code>help</code> command — we will return to this later.</li>
</ul></section><section><h2 class="section-heading" id="working-with-variables">Working with variables<a class="anchor" aria-label="anchor" href="#working-with-variables"></a>
</h2>
<hr class="half-width">
<p>In this lesson we will learn how to manipulate the inflammation
dataset with MATLAB. But before we discuss how to deal with many data
points, we will show how to store a single value on the computer.</p>
<p>We can create a new <a href="reference.html#variable">variable</a> by
assigning a value to it using <code>=</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight_kg</span> <span class="op">=</span> <span class="fl">55</span><span class="op">;</span></span></code></pre>
</div>
<p>At first glance nothing appears to have happened! We don’t get any
output in the command window because we put a semi-colon after the
variable assignment: this suppresses output, which is generally a good
thing because it makes code run more quickly. Let’s run the command
again without the semi-colon, and this time we have some output in the
command window:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight_kg</span> <span class="op">=</span> <span class="fl">55</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">weight_kg</span> <span class="op">=</span></span>
<span>    <span class="fl">55</span></span></code></pre>
</div>
<p>A variable is just a name for a piece of data or <em>value</em>.
Variable names must begin with a letter, and are case sensitive. They
can contain also numbers or underscores. Examples of valid variable
names are <code>x</code>, <code>f_0</code> or
<code>current_temperature</code>.</p>
<p>Once a variable has a value, we can print it using the
<code>disp</code> function:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">weight_kg</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span>    <span class="fl">55</span></span></code></pre>
</div>
<p>or simply typing its name, followed by <kbd>Enter</kbd></p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight_kg</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">weight_kg</span> <span class="op">=</span></span>
<span>    <span class="fl">55</span></span></code></pre>
</div>
<p>Storing single values is fine, but how can we store multiple values
in the same variable? We can create an array using square brackets,
separating each value with a comma:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">a</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a =
     1     2     3</code></pre>
</div>
<p>In a similar way, we can create matrices using semi-colons to
separate rows:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">b</span> <span class="op">=</span> [<span class="va">a</span><span class="op">;</span> <span class="fl">4</span><span class="op">,</span> <span class="fl">5</span><span class="op">,</span> <span class="fl">6</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>b =
     1     2     3
     4     5     6</code></pre>
</div>
<p>Something to bear in mind about arrays and matrices is that all
values in an array must be of the same type e.g. all numbers or all
strings. It is however possible to convert between data types
e.g. <code>num2str</code> which converts numbers to a string
representation.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">num2str</span>(<span class="va">a</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="va">ans</span> <span class="op">=</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    <span class="ss">'1  2  3'</span></span></code></pre>
</div>
<p>So once we have a numeric value stored in a variable, we can do
arithmetic with it:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight_lb</span> <span class="op">=</span> <span class="fl">2.2</span> <span class="op">*</span> <span class="va">weight_kg</span><span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="ss">'Weight in pounds: '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">weight_lb</span>)])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Weight in pounds: 121</code></pre>
</div>
<p>That last command combines several new concepts, so let’s break it
down:</p>
<p>The <code>disp</code> function takes a single argument — the value to
print. So if we want to print more than one value on a single line, we
can print an <em>array</em> of values (i.e. one argument), which we
create using square brackets, and recall that an array must contain
values all of the same type. In this case we convert the number to a
string so that we can print an array of characters.</p>
<p>We can change the value of a variable by assigning it a new one:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight_kg</span> <span class="op">=</span> <span class="fl">57.5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">weight_kg</span> <span class="op">=</span></span>
<span>    <span class="fl">57.5</span></span></code></pre>
</div>
<p>Assigning a value to one variable does not change the values of other
variables.</p>
<p>For example, we just changed the value of <code>weight_kg</code> from
55 to 57.5, but <code>weight_lb</code> hasn’t changed:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">weight_lb</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">weight_lb</span> <span class="op">=</span></span>
<span>    <span class="fl">121</span></span></code></pre>
</div>
<p>Since <code>weight_lb</code> doesn’t “remember” where its value came
from, it isn’t automatically updated when <code>weight_kg</code>
changes. This is important to remember, and different from the way
spreadsheets work.</p>
<p>Now that we know how to assign values to variables, let’s view a list
of all the variables in our workspace:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">who</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Your variables are:

a  b  weight_kg  weight_lb</code></pre>
</div>
<p>To remove a variable from MATLAB, use the <code>clear</code>
command:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">clear</span> <span class="va">weight_lb</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">who</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Your variables are:

a  b  weight_kg</code></pre>
</div>
<p>Alternatively, we can look at the <strong>Workspace</strong>. The
workspace contains all variable names and assigned values that we
currently work with. As long as they pop up in the workspace, they are
universally available. It’s generally a good idea to keep the workspace
as clean as possible. To remove all variables from the workspace,
execute the command <code>clear</code> on its own.</p>
<div id="predicting-variable-values" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="predicting-variable-values" class="callout-inner">
<h3 class="callout-title">Predicting Variable Values</h3>
<div class="callout-content">
<p>Predict what variables refer to what values after each statement in
the following program:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mass</span> <span class="op">=</span> <span class="fl">47.5</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">age</span> <span class="op">=</span> <span class="fl">122</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mass</span> <span class="op">=</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.0</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">age</span> <span class="op">=</span> <span class="va">age</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The first two lines assign the initial values to the variables, so
mass = 47.5 and age = 122. The next line evaluates
<code>mass * 2.0</code> i.e. <code>47.5 * 2.0 = 95</code>, <em>then</em>
assigns the result to the variable <code>mass</code>. The last line
evaulates <code>age - 20</code> i.e. <code>122 - 20</code>,
<em>then</em> assigns the result to the variable <code>age</code>. So
the final values are mass = 95, and age = 102.</p>
<p>The key point to understand here is that the expression to the right
of the <code>=</code> sign is evaluated first, and the result is then
assigned to the variable specified to the left of the <code>=</code>
sign.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="good-practices-for-project-organisation">Good practices for project organisation<a class="anchor" aria-label="anchor" href="#good-practices-for-project-organisation"></a>
</h2>
<hr class="half-width">
<p>Before we get started, let’s create some directories to help organise
this project.</p>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout-inner">
<h3 class="callout-title">Tip: Good Enough Practices for Scientific Computing</h3>
<div class="callout-content">
<p><a href="https://swcarpentry.github.io/good-enough-practices-in-scientific-computing/" class="external-link">Good
Enough Practices for Scientific Computing</a> is a paper written by
researchers involved with the Carpentries, which covers basic workflow
skills for research computing. It recommends the following for project
organization:</p>
<ol style="list-style-type: decimal">
<li>Put each project in its own directory, which is named after the
project.</li>
<li>Put text documents associated with the project in the
<code>doc</code> directory.</li>
<li>Put raw data and metadata in the <code>data</code> directory, and
files generated during clean-up and analysis in a <code>results</code>
directory.</li>
<li>Put source code for the project in the <code>src</code> directory,
and programs brought in from elsewhere or compiled locally in the
<code>bin</code> directory.</li>
<li>Name all files to reflect their content or function.</li>
</ol>
</div>
</div>
</div>
<p>Our main project directory is
<code>matlab-novice-inflammation</code>, where we’ll save all our
scripts and function files. We already have <code>data</code> and
<code>results</code> directories here.</p>
<p>A crucial step is to set the <em>current folder</em> in MATLAB to our
project directory. Use the <strong>Current Folder</strong> window in the
MATLAB GUI to browse to your project folder
(<code>matlab-novice-inflammation</code>).</p>
<p>In order to check the current directory, we can run <code>pwd</code>
(print working directory). A second check we can do is to run the
<code>ls</code> (list) command in the Command Window to list the
contents of the working directory — we should get the following
output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>data   results</code></pre>
</div>
<p>Reading data from files and writing data to them are essential tasks
in scientific computing, and admittedly, something that we’d rather not
spend a lot of time thinking about. Fortunately, MATLAB comes with a
number of high-level tools to do these things efficiently, sparing us
the grisly detail.</p>
<p>If we know what our data looks like (in this case, we have a matrix
stored as comma-separated values) and we’re unsure about what command we
want to use, we can search the documentation. Type
<code>read matrix</code> into the documentation toolbar. MATLAB suggests
using <code>readmatrix</code>. If we have a closer look at the
documentation, MATLAB also tells us, which in- and output arguments this
function has.</p>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>Octave does not provide a function named <code>readmatrix</code>, but
the equivalent functionality (in both Octave and MATLAB) can be achieved
with <code>dlmread</code> for the files we will work with in this
lesson.</p>
</div>
</div>
</div>
<p>To load the data from our CSV file into MATLAB, type the following
command into the MATLAB command window, and press <kbd>Enter</kbd>:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span></code></pre>
</div>
<p>This loads the data and assigns it to a variable,
<em>patient_data</em>. This is a good example of when to use a
semi-colon to suppress output — try re-running the command without the
semi-colon to find out why. You should see a wall of numbers printed,
which is the data from the file.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)</span></code></pre>
</div>
<p>The expression <code>readmatrix(...)</code> is a <a href="reference.html#function-call">function call</a>. Functions
generally need <a href="reference.html#argument">arguments</a> to run.
In the case of the <code>readmatrix</code> function, we need to provide
a single argument: the name of the file we want to read data from. This
argument needs to be a character string or <a href="reference.html#string">string</a>, so we put it in quotes.</p>
<p>Now that our data is in memory, we can start doing things with it.
First, let’s find out its <a href="reference.html#size">size</a>:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size</span>(<span class="va">patient_data</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

    60 40</code></pre>
</div>
<p>The output tells us that the variable <code>patient_data</code>
refers to a table of values that has 60 rows and 40 columns.</p>
<p>MATLAB stores <em>all</em> data in the form of multi-dimensional
arrays. For example:</p>
<ul>
<li>Numbers, or <em>scalars</em> are represented as two dimensional
arrays with only one row and one column, as are single characters.</li>
<li>Lists of numbers, or <em>vectors</em> are two dimensional as well,
but the value of one of the dimensions equals one. By default vectors
are row vectors, meaning they have one row and as many columns as there
are elements in the vector.</li>
<li>Tables of numbers, or <em>matrices</em> are arrays with more than
one column and more than one row.</li>
<li>Even character strings, like sentences, are stored as an “array of
characters”.</li>
</ul>
<p>Normally, MATLAB arrays can’t store elements of different data types.
For instance, a MATLAB array can’t store both a <code>float</code> and a
<code>char</code>. To do that, you have to use a <a href="https://www.mathworks.com/help/matlab/cell-arrays.html" class="external-link">Cell
Array</a>.</p>
<p>We can use the <code>class</code> function to find out what type of
data lives inside an array:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">class</span>(<span class="va">patient_data</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span>    <span class="st">'double'</span></span></code></pre>
</div>
<p>This output tells us that <code>patient_data</code> contains double
precision floating-point numbers. This is the default numeric data type
in MATLAB. If you want to store other numeric data types, you need to
tell MATLAB explicitly. For example, the command,</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">x</span> <span class="op">=</span> <span class="va">int16</span>(<span class="fl">325</span>)<span class="op">;</span></span></code></pre>
</div>
<p>assigns the value <code>325</code> to the name <code>x</code>,
storing it as a 16-bit signed integer.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>MATLAB stores data in arrays.</li>
<li>Use <code>readmatrix</code> to read tabular CSV data into a
program.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-arrays"><p>Content from <a href="02-arrays.html">Arrays</a></p>
<hr>
<p>Last updated on 2025-01-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/02-arrays.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 20 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I access subsets of data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Select individual values and subsections from data.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="array-indexing">Array indexing<a class="anchor" aria-label="anchor" href="#array-indexing"></a>
</h2>
<hr class="half-width">
<p>Now that we understand what kind of data can be stored in an array,
we need to learn the proper syntax for working with arrays in MATLAB. To
do this we will begin by discussing array <strong>indexing</strong>,
which is the method by which we can select one or more different
elements of an array. A solid understanding of array indexing will
greatly assist our ability to organize our data.</p>
<p>Let’s start by creating an 8-by-8 “magic” Matrix:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span> <span class="op">=</span> <span class="va">magic</span>(<span class="fl">8</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

   64    2    3   61   60    6    7   57
    9   55   54   12   13   51   50   16
   17   47   46   20   21   43   42   24
   40   26   27   37   36   30   31   33
   32   34   35   29   28   38   39   25
   41   23   22   44   45   19   18   48
   49   15   14   52   53   11   10   56
    8   58   59    5    4   62   63    1</code></pre>
</div>
<p>We want to access a single value from the matrix:</p>
<figure><img src="../fig/matrix-single-element.svg" alt="Accessing a single value" class="figure mx-auto d-block"></figure><p>To do that, we must provide its <a href="reference.html#index">index</a> in parentheses:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="fl">6</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">38</span></span></code></pre>
</div>
<p>Indices are provided as (row, column). So the index
<code>(5, 6)</code> selects the element on the fifth row and sixth
column.</p>
<p>An index like <code>(5, 6)</code> selects a single element of an
array, but we can also access sections of the matrix, or <a href="reference.html#slice">slices</a>. To access a row of values:</p>
<figure><img src="../fig/matrix-row.svg" alt="Accessing a single value" class="figure mx-auto d-block"></figure><p>we can do:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">5</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

   32   34   35   29   28   38   39   25
</code></pre>
</div>
<p>Providing <code>:</code> as the index for a dimension selects
<em>all</em> elements along that dimension. So, the index
<code>(5, :)</code> selects the elements on row <code>5</code>, and
<em>all</em> columns—effectively, the entire row. We can also select
multiple rows,</p>
<figure><img src="../fig/matrix-multi-rows.svg" alt="Accessing multiple rows" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

   64    2    3   61   60    6    7   57
    9   55   54   12   13   51   50   16
   17   47   46   20   21   43   42   24
   40   26   27   37   36   30   31   33</code></pre>
</div>
<p>and columns:</p>
<figure><img src="../fig/matrix-multi-cols.svg" alt="Accessing multiple columns" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="op">:,</span> <span class="fl">6</span><span class="op">:</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

    6    7   57
   51   50   16
   43   42   24
   30   31   33
   38   39   25
   19   18   48
   11   10   56
   62   63    1</code></pre>
</div>
<p>To select a submatrix,</p>
<figure><img src="../fig/matrix-submatrix.svg" alt="Accessing a submatrix" class="figure mx-auto d-block"></figure><p>we have to take slices in both dimensions:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">,</span> <span class="fl">5</span><span class="op">:</span><span class="fl">7</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

   36   30   31
   28   38   39
   45   19   18
</code></pre>
</div>
<p>We don’t have to take all the values in the slice—if we provide a <a href="reference.html#stride">stride</a>. Let’s say we want to start with
row <code>2</code>, and subsequently select every third row:</p>
<figure><img src="../fig/matrix-strided-rows.svg" alt="Accessing strided columns" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="kw">end</span><span class="op">,</span> <span class="op">:</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

    9   55   54   12   13   51   50   16
   32   34   35   29   28   38   39   25
    8   58   59    5    4   62   63    1</code></pre>
</div>
<p>And we can also select values in a “checkerboard”,</p>
<figure><img src="../fig/matrix-strided-rowncols.svg" alt="Accessing strided rows and columns" class="figure mx-auto d-block"></figure><p>by taking appropriate strides in both dimensions:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">M</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="kw">end</span><span class="op">,</span> <span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="kw">end</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

    2   61    6   57
   26   37   30   33
   15   52   11   56</code></pre>
</div>
<div id="slicing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="slicing" class="callout-inner">
<h3 class="callout-title">Slicing</h3>
<div class="callout-content">
<p>A subsection of an array is called a <a href="reference.html#slice">slice</a>. We can take slices of character
strings as well:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">element</span> <span class="op">=</span> <span class="ss">'oxygen'</span><span class="op">;</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="ss">'first three characters: '</span><span class="op">,</span> <span class="va">element</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>)])</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="ss">'last three characters: '</span><span class="op">,</span> <span class="va">element</span>(<span class="fl">4</span><span class="op">:</span><span class="fl">6</span>)])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>first three characters: oxy
last three characters: gen</code></pre>
</div>
<ol style="list-style-type: decimal">
<li><p>What is the value of <code>element(4:end)</code>? What about
<code>element(1:2:end)</code>? Or
<code>element(2:end - 1)</code>?</p></li>
<li><p>For any size array, MATLAB allows us to index with a single colon
operator (<code>:</code>). This can have surprising effects. For
instance, compare <code>element</code> with <code>element(:)</code>.
What is <code>size(element)</code> versus <code>size(element(:))</code>?
Finally, try using the single colon on the matrix <code>M</code> above:
<code>M(:)</code>. What seems to be happening when we use the single
colon operator for slicing?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Exercises using slicing</li>
</ol>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="va">element</span>(<span class="fl">4</span><span class="op">:</span><span class="kw">end</span>)   <span class="co">% Select all elements from 4th to last</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="va">ans</span> <span class="op">=</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>    <span class="ss">'gen'</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="va">element</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="kw">end</span>) <span class="co">% Select every other element starting at first</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="va">ans</span> <span class="op">=</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="ss">'oye'</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="va">element</span>(<span class="fl">2</span><span class="op">:</span><span class="kw">end</span><span class="op">-</span><span class="fl">1</span>) <span class="co">% Select elements starting with 2nd, until last-but-one</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="va">ans</span> <span class="op">=</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>    <span class="ss">'xyge'</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>The colon operator ‘flattens’ a vector or matrix into a column
vector. The order of the elements in the resulting vector comes from
appending each column of the original array in turn. Have a look at the
order of the values in <code>M(:)</code> vs <code>M</code>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>M(row, column)</code> indices are used to select data
points</li>
<li>
<code>:</code> is used to take slices of data</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-plotting"><p>Content from <a href="03-plotting.html">Plotting data</a></p>
<hr>
<p>Last updated on 2025-01-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/03-plotting.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 35 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I process and visualize my data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Perform operations on arrays of data.</li>
<li>Display simple graphs.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="analyzing-patient-data">Analyzing patient data<a class="anchor" aria-label="anchor" href="#analyzing-patient-data"></a>
</h2>
<hr class="half-width">
<p>Now that we know how to access data we want to compute with, we’re
ready to analyze <code>patient_data</code>. MATLAB knows how to perform
common mathematical operations on arrays. If we want to find the average
inflammation for all patients on all days, we can just ask for the mean
of the array:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean</span>(<span class="va">patient_data</span>(<span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">6.1487</span></span></code></pre>
</div>
<p>We couldn’t just do <code>mean(patient_data)</code> because, that
would compute the mean of <em>each column</em> in our table, and return
an array of mean values. The expression <code>patient_data(:)</code>
<em>flattens</em> the table into a one-dimensional array.</p>
<p>To get details about what a function, like <code>mean</code>, does
and how to use it, we can search the documentation, or use MATLAB’s
<code>help</code> command.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">help</span> <span class="va">mean</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>mean   Average or mean value.
    S = mean(X) is the mean value of the elements in X if X is a vector.
    For matrices, S is a row vector containing the mean value of each
    column.
    For N-D arrays, S is the mean value of the elements along the first
    array dimension whose size does not equal 1.

    mean(X,DIM) takes the mean along the dimension DIM of X.

    S = mean(...,TYPE) specifies the type in which the mean is performed,
    and the type of S. Available options are:

    'double'    -  S has class double for any input X
    'native'    -  S has the same class as X
    'default'   -  If X is floating point, that is double or single,
                   S has the same class as X. If X is not floating point,
                   S has class double.

    S = mean(...,NANFLAG) specifies how NaN (Not-A-Number) values are
    treated. The default is 'includenan':

    'includenan' - the mean of a vector containing NaN values is also NaN.
    'omitnan'    - the mean of a vector containing NaN values is the mean
                   of all its non-NaN elements. If all elements are NaN,
                   the result is NaN.

    Example:
        X = [1 2 3; 3 3 6; 4 6 8; 4 7 7]
        mean(X,1)
        mean(X,2)

    Class support for input X:
       float: double, single
       integer: uint8, int8, uint16, int16, uint32,
                int32, uint64, int64

    See also median, std, min, max, var, cov, mode.</code></pre>
</div>
<p>We can also compute other statistics, like the maximum, minimum and
standard deviation.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="ss">'Maximum inflammation:'</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">max</span>(<span class="va">patient_data</span>(<span class="op">:</span>)))</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="ss">'Minimum inflammation:'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">min</span>(<span class="va">patient_data</span>(<span class="op">:</span>)))</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="ss">'Standard deviation:'</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">std</span>(<span class="va">patient_data</span>(<span class="op">:</span>)))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Maximum inflammation:
20
Minimum inflammation:
0
Standard deviation:
4.6148</code></pre>
</div>
<p>When analyzing data though, we often want to look at partial
statistics, such as the maximum value per patient or the average value
per day. One way to do this is to assign the data we want to a new
temporary array, then ask it to do the calculation:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">patient_1</span> <span class="op">=</span> <span class="va">patient_data</span>(<span class="fl">1</span><span class="op">,</span> <span class="op">:</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="ss">'Maximum inflation for patient 1:'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">max</span>(<span class="va">patient_1</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Maximum inflation for patient 1:
18</code></pre>
</div>
<p>We don’t actually need to store the row in a variable of its own.
Instead, we can combine the selection and the function call:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">max</span>(<span class="va">patient_data</span>(<span class="fl">1</span><span class="op">,</span> <span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">18</span></span></code></pre>
</div>
<p>What if we need the maximum inflammation for <em>all</em> patients,
or the average for each day? As the diagram below shows, we want to
perform the operation across an axis:</p>
<figure><img src="../fig/matlab-operations-across-axes.svg" alt="Operations Across Axes" class="figure mx-auto d-block"></figure><p>To support this, MATLAB allows us to specify the <em>dimension</em>
we want to work on. If we ask for the average across the dimension 1,
we’re asking for one summary value per column, which is the average of
all the rows. In other words, we’re asking for the average inflammation
per day for all patients.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
  Columns 1 through 10
         0    0.4500    1.1167    1.7500    2.4333    3.1500    3.8000    3.8833    5.2333    5.5167
  Columns 11 through 20
    5.9500    5.9000    8.3500    7.7333    8.3667    9.5000    9.5833   10.6333   11.5667   12.3500
  Columns 21 through 30
   13.2500   11.9667   11.0333   10.1667   10.0000    8.6667    9.1500    7.2500    7.3333    6.5833
  Columns 31 through 40
    6.0667    5.9500    5.1167    3.6000    3.3000    3.5667    2.4833    1.5000    1.1333    0.5667</code></pre>
</div>
<p>If we average across axis 2, we’re asking for one summary value per
row, which is the average of all the columns. In other words, we’re
asking for the average inflammation per patient over all the days:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">2</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span></span>
<span></span>
<span>   <span class="fl">5.4500</span></span>
<span>   <span class="fl">5.4250</span></span>
<span>   <span class="fl">6.1000</span></span>
<span>   <span class="fl">5.9000</span></span>
<span>   <span class="fl">5.5500</span></span>
<span>   <span class="fl">6.2250</span></span>
<span>   <span class="fl">5.9750</span></span>
<span>   <span class="fl">6.6500</span></span>
<span>   <span class="fl">6.6250</span></span>
<span>   <span class="fl">6.5250</span></span>
<span>   <span class="fl">6.7750</span></span>
<span>   <span class="fl">5.8000</span></span>
<span>   <span class="fl">6.2250</span></span>
<span>   <span class="fl">5.7500</span></span>
<span>   <span class="fl">5.2250</span></span>
<span>   <span class="fl">6.3000</span></span>
<span>   <span class="fl">6.5500</span></span>
<span>   <span class="fl">5.7000</span></span>
<span>   <span class="fl">5.8500</span></span>
<span>   <span class="fl">6.5500</span></span>
<span>   <span class="fl">5.7750</span></span>
<span>   <span class="fl">5.8250</span></span>
<span>   <span class="fl">6.1750</span></span>
<span>   <span class="fl">6.1000</span></span>
<span>   <span class="fl">5.8000</span></span>
<span>   <span class="fl">6.4250</span></span>
<span>   <span class="fl">6.0500</span></span>
<span>   <span class="fl">6.0250</span></span>
<span>   <span class="fl">6.1750</span></span>
<span>   <span class="fl">6.5500</span></span>
<span>   <span class="fl">6.1750</span></span>
<span>   <span class="fl">6.3500</span></span>
<span>   <span class="fl">6.7250</span></span>
<span>   <span class="fl">6.1250</span></span>
<span>   <span class="fl">7.0750</span></span>
<span>   <span class="fl">5.7250</span></span>
<span>   <span class="fl">5.9250</span></span>
<span>   <span class="fl">6.1500</span></span>
<span>   <span class="fl">6.0750</span></span>
<span>   <span class="fl">5.7500</span></span>
<span>   <span class="fl">5.9750</span></span>
<span>   <span class="fl">5.7250</span></span>
<span>   <span class="fl">6.3000</span></span>
<span>   <span class="fl">5.9000</span></span>
<span>   <span class="fl">6.7500</span></span>
<span>   <span class="fl">5.9250</span></span>
<span>   <span class="fl">7.2250</span></span>
<span>   <span class="fl">6.1500</span></span>
<span>   <span class="fl">5.9500</span></span>
<span>   <span class="fl">6.2750</span></span>
<span>   <span class="fl">5.7000</span></span>
<span>   <span class="fl">6.1000</span></span>
<span>   <span class="fl">6.8250</span></span>
<span>   <span class="fl">5.9750</span></span>
<span>   <span class="fl">6.7250</span></span>
<span>   <span class="fl">5.7000</span></span>
<span>   <span class="fl">6.2500</span></span>
<span>   <span class="fl">6.4000</span></span>
<span>   <span class="fl">7.0500</span></span>
<span>   <span class="fl">5.9000</span></span></code></pre>
</div>
<p>We can quickly check the size of this array:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">size</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">2</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =
    60    1</code></pre>
</div>
<p>The size tells us we have a 60-by-1 vector, confirming that this is
the average inflammation per patient over all days in the trial.</p>
</section><section><h2 class="section-heading" id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h2>
<hr class="half-width">
<p>The mathematician Richard Hamming once said, “The purpose of
computing is insight, not numbers,” and the best way to develop insight
is often to visualize data. Visualization deserves an entire lecture (or
course) of its own, but we can explore a few features of MATLAB
here.</p>
<p>Let’s display a heat map of our data:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">imagesc</span>(<span class="va">patient_data</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Patient number'</span>)</span></code></pre>
</div>
<figure><img src="../fig/inflammation-heatmap.png" alt="Heat map" class="figure mx-auto d-block"></figure><p>The <code>imagesc</code> function represents the matrix as a color
image. Every value in the matrix is <em>mapped</em> to a color. Blue
regions in this heat map are low values, while yellow shows high values.
As we can see, inflammation rises and falls over a 40 day period.</p>
<p>It’s good practice to give the figure a <code>title</code>, and to
label the axes using <code>xlabel</code> and <code>ylabel</code> so that
other people can understand what it shows (including us if we return to
this plot 6 months from now).</p>
<p>Let’s take a look at the average inflammation over time:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span></code></pre>
</div>
<figure><img src="../fig/average-inflammation.png" alt="Average inflammation" class="figure mx-auto d-block"></figure><p>Here, we have calculated the average per day across all patients then
used the <code>plot</code> function to display a line graph of those
values. The result is roughly a linear rise and fall, which is
suspicious: based on other studies, we expect a sharper rise and slower
fall. Let’s have a look at two other statistics: the maximum and minimum
inflammation per day across all patients.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Maximum inflammation per day'</span>)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span></code></pre>
</div>
<figure><img src="../fig/max-inflammation.png" alt="Maximum inflammation" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Minimum inflammation per day'</span>)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span></code></pre>
</div>
<figure><img src="../fig/min-inflammation.png" alt="Minumum inflammation" class="figure mx-auto d-block"></figure><p>Like <code>mean()</code>, the functions <code>max()</code> and
<code>min()</code> can also operate across a specified dimension of the
matrix. However, the syntax is slightly different. To see why, run a
<code>help</code> on each of these functions.</p>
<p>From the figures, we see that the maximum value rises and falls
perfectly smoothly, while the minimum seems to be a step function.
Neither result seems particularly likely, so either there’s a mistake in
our calculations or something is wrong with our data.</p>
<div id="plots" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plots" class="callout-inner">
<h3 class="callout-title">Plots</h3>
<div class="callout-content">
<p>When we plot just one variable using the <code>plot</code> command
e.g. <code>plot(Y)</code> or <code>plot(mean(patient_data, 1))</code>,
what do the x-values represent?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The x-values are the indices of the y-data, so the first y-value is
plotted against index 1, the second y-value against 2 etc.</p>
</div>
</div>
</div>
</div>
<div id="plots" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plots" class="callout-inner">
<h3 class="callout-title">Plots<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Why are the vertical lines in our plot of the minimum inflammation
per day not perfectly vertical?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>MATLAB interpolates between the points on a 2D line plot.</p>
</div>
</div>
</div>
</div>
<div id="plots" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plots" class="callout-inner">
<h3 class="callout-title">Plots<em> (continued)</em>
</h3>
<div class="callout-content">
<p>Create a plot showing the standard deviation of the inflammation data
for each day across all patients. Hint: search the documentation for
<em>standard deviation</em></p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">std</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">title</span>(<span class="ss">'Standard deviation across all patients'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>It is often convenient to combine multiple plots into one figure
using the <code>subplot</code> command which plots our graphs in a grid
pattern. The first two parameters describe the grid we want to use,
while the third parameter indicates the placement on the grid.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'max'</span>)</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'day'</span>)</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">ylabel</span>(<span class="ss">'min'</span>)</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">xlabel</span>(<span class="ss">'day'</span>)</span></code></pre>
</div>
<figure><img src="../fig/max-min-subplot.png" alt="Max Min subplot" class="figure mx-auto d-block"></figure><p>Our work so far has convinced us that something is wrong with our
first data file. We would like to check the other 11 the same way, but
typing in the same commands repeatedly is tedious and error-prone. Since
computers don’t get bored (that we know of), we should create a way to
do a complete analysis with a single command, and then figure out how to
repeat that step once for each file. These operations are the subjects
of the next two lessons.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>plot</code> to visualize data.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-04-scripts"><p>Content from <a href="04-scripts.html">Writing MATLAB Scripts</a></p>
<hr>
<p>Last updated on 2025-01-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/04-scripts.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 35 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I save and re-use my programs?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write and save MATLAB scripts.</li>
<li>Save MATLAB plots to disk.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>So far, we’ve typed in commands one-by-one on the command line to get
MATLAB to do things for us. But what if we want to repeat our analysis?
Sure, it’s only a handful of commands, and typing them in shouldn’t take
us more than a few minutes. But if we forget a step or make a mistake,
we’ll waste time rewriting commands. Also, we’ll quickly find ourselves
doing more complex analyses, and we’ll need our results to be more
easily reproducible.</p>
<p>In addition to running MATLAB commands one-by-one on the command
line, we can also write several commands in a <em>script</em>. A MATLAB
script is just a text file with a <code>.m</code> extension. We’ve
written commands to load data from a <code>.csv</code> file and display
some plots of statistics about that data. Let’s put those commands in a
script called <code>plot_patient1.m</code>, which we’ll save in our
current directory, <code>matlab-novice-inflammation</code>.</p>
<p>To create a new script in the current directory, we use</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">edit</span> <span class="va">plot_patient1</span>.<span class="va">m</span></span></code></pre>
</div>
<p>then we type the contents of the script:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span></code></pre>
</div>
<p>Note that we are explicitly creating a new figure window using the
<code>figure</code> command.</p>
<p>Try this on the command line:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="va">figure</span></span></code></pre>
</div>
<p>MATLAB’s plotting commands only create a new figure window if one
doesn’t already exist: the default behaviour is to reuse the current
figure window as we saw in the previous episode. Explicitly creating a
new figure window in the script avoids any unexpected results from
plotting on top of existing figures.</p>
<p>You can get MATLAB to run the commands in the script by typing in the
name of the script (without the <code>.m</code>) in the MATLAB command
line:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="va">plot_patient1</span></span></code></pre>
</div>
<div id="the-matlab-path" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-matlab-path" class="callout-inner">
<h3 class="callout-title">The MATLAB path</h3>
<div class="callout-content">
<p>MATLAB knows about files in the current directory, but if we want to
run a script saved in a different location, we need to make sure that
this file is visible to MATLAB. We do this by adding directories to the
MATLAB <strong>path</strong>. The <em>path</em> is a list of directories
MATLAB will search through to locate files.</p>
<p>To add a directory to the MATLAB path, we go to the <code>Home</code>
tab, click on <code>Set Path</code>, and then on
<code>Add with Subfolders...</code>. We navigate to the directory and
add it to the path to tell MATLAB where to look for our files. When you
refer to a file (either code or data), MATLAB will search all the
directories in the path to find it. Alternatively, for data files, we
can provide the relative or absolute file path.</p>
</div>
</div>
</div>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>Octave has only recently gained a MATLAB-like user interface. To
change the path in any version of Octave, including command-line-only
installations, use <code>addpath('path/to/directory')</code></p>
</div>
</div>
</div>
<p>In this script, let’s save the figures to disk as image files using
the <code>print</code> command. In order to maintain an organised
project we’ll save the images in the <code>results</code> directory:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">% Plot average inflammation per day</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Daily average inflammation'</span>)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day of trial'</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">% Save plot in 'results' folder as png image:</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="va">print</span>(<span class="ss">'results/average'</span><span class="op">,</span><span class="ss">'-dpng'</span>)</span></code></pre>
</div>
<div id="help-text" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="help-text" class="callout-inner">
<h3 class="callout-title">Help text</h3>
<div class="callout-content">
<p>You might have noticed that we described what we want our code to do
using the percent sign: <code>%</code>. This is another plus of writing
scripts: you can comment your code to make it easier to understand when
you come back to it after a while.</p>
<p>A comment can appear on any line, but be aware that the first line or
block of comments in a script or function is used by MATLAB as the
<strong>help text</strong>. When we use the <code>help</code> command,
MATLAB returns the <em>help text</em>. The first help text line (known
as the <strong>H1 line</strong>) typically includes the name of the
program, and a brief description. The <code>help</code> command works in
just the same way for our own programs as for built-in MATLAB functions.
You should write help text for all of your own scripts and
functions.</p>
</div>
</div>
</div>
<p>Let’s write an H1 line at the top of our script:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">%PLOT_PATIENT1   Save plots of inflammation statistics to disk.</span></span></code></pre>
</div>
<p>We can then get help for our script by running</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="va">help</span> <span class="va">plot_patient1</span></span></code></pre>
</div>
<p>Let’s modify our <code>plot_patient1</code> script so that it creates
and saves sub-plots, rather than individual plots. As before we’ll save
the images in the <code>results</code> directory.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">%PLOT_PATIENT1   Save plots of inflammation statistics to disk.</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">% Plot inflammation stats for first patient</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a><span class="co">% Save plot in 'results' directory as png image.</span></span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a><span class="va">print</span>(<span class="ss">'results/inflammation-01'</span><span class="op">,</span><span class="ss">'-dpng'</span>)</span></code></pre>
</div>
<p>When saving plots to disk, it’s sometimes useful to turn off their
visibility as MATLAB plots them. For example, we might not want to view
(or spend time closing) the figures in MATLAB, and not displaying the
figures could make the script run faster.</p>
<p>Let’s add a couple of lines of code to do this:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">%PLOT_PATIENT1   Save plots of inflammation statistics to disk.</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">% Plot inflammation stats for first patient</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'inflammation'</span>)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="va">subplot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a><span class="co">% Save plot in 'results' directory as png image.</span></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a><span class="va">print</span>(<span class="ss">'results/inflammation-01'</span><span class="op">,</span><span class="ss">'-dpng'</span>)</span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a><span class="va">close</span>()</span></code></pre>
</div>
<p>We can ask MATLAB to create an empty figure window without displaying
it by setting its <code>'visible'</code> property to <code>'off'</code>,
like so:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span></code></pre>
</div>
<p>When we do this, we have to be careful to manually “close” the figure
after we are doing plotting on it - the same as we would “close” an
actual figure window if it were open:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="va">close</span>()</span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Save MATLAB code in files with a <code>.m</code> suffix.</li>
</ul>
</div>
</div>
</div></section><section id="aio-05-loops"><p>Content from <a href="05-loops.html">Repeating With Loops</a></p>
<hr>
<p>Last updated on 2025-01-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/05-loops.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 50 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I repeat the same operations on multiple values?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what a for loop does.</li>
<li>Correctly write for loops that repeat simple commands.</li>
<li>Trace changes to a loop variable as the loops runs.</li>
<li>Use a for loop to process multiple files</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Recall that we have to do this analysis for every one of our dozen
datasets, and we need a better way than typing out commands for each
one, because we’ll find ourselves writing a lot of duplicate code.
Remember, code that is repeated in two or more places will eventually be
wrong in at least one. Also, if we make changes in the way we analyze
our datasets, we have to introduce that change in every copy of our
code. To avoid all of this repetition, we have to teach MATLAB to repeat
our commands, and to do <em>that</em>, we have to learn how to write
<em>loops</em>.</p>
<p>Suppose we want to print each character in the word “lead” on a line
of its own. One way is to use four <code>disp</code> statements:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'lead'</span><span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span>))</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">2</span>))</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">3</span>))</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">4</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">l</span></span>
<span><span class="va">e</span></span>
<span><span class="va">a</span></span>
<span><span class="va">d</span></span></code></pre>
</div>
<p>But this is a bad approach for two reasons:</p>
<ol style="list-style-type: decimal">
<li><p>It doesn’t scale: if we want to print the characters in a string
that’s hundreds of letters long, we’d be better off typing them
in.</p></li>
<li><p>It’s fragile: if we change <code>word</code> to a longer string,
it only prints part of the data, and if we change it to a shorter one,
it produces an error, because we’re asking for characters that don’t
exist.</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'tin'</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span>))</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">2</span>))</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">3</span>))</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="va">disp</span>(<span class="va">word</span>(<span class="fl">4</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>error: A(I): index out of bounds; value 4 out of bound 3</code></pre>
</div>
<p>There’s a better approach:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'lead'</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">l</span></span>
<span><span class="va">e</span></span>
<span><span class="va">a</span></span>
<span><span class="va">d</span></span></code></pre>
</div>
<p>This improved version uses a <a href="reference.html#for-loop">for
loop</a> to repeat an operation—in this case, printing to the
screen—once for each element in an array.</p>
<p>The general form of a for loop is:</p>
<pre class="source"><code>for variable = collection
    do things with variable
end</code></pre>
<p>The for loop executes the commands in the <a href="reference.html#loop-body">loop body</a> for every value in the
array <code>collection</code>. This value is called the <a href="reference.html#loop-variable">loop variable</a>, and we can call
it whatever we like. In our example, we gave it the name
<code>letter</code>.</p>
<p>We have to terminate the loop body with the <code>end</code> keyword,
and we can have as many commands as we like in the loop body. But, we
have to remember that they will all be repeated as many times as there
are values in <code>collection</code>.</p>
<p>Our for loop has made our code more scalable, and less fragile.
There’s still one little thing about it that should bother us. For our
loop to deal appropriately with shorter or longer words, we have to
change the first line of our loop by hand:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'tin'</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">t</span></span>
<span><span class="va">i</span></span>
<span><span class="va">n</span></span></code></pre>
</div>
<p>Although this works, it’s not the best way to write our loop:</p>
<ul>
<li><p>We might update <code>word</code> and forget to modify the loop
to reflect that change.</p></li>
<li><p>We might make a mistake while counting the number of letters in
<code>word</code>.</p></li>
</ul>
<p>Fortunately, MATLAB provides us with a convenient function to write a
better loop:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminum'</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">word</span>)</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="va">l</span></span>
<span><span class="va">u</span></span>
<span><span class="va">m</span></span>
<span><span class="va">i</span></span>
<span><span class="va">n</span></span>
<span><span class="va">u</span></span>
<span><span class="va">m</span></span></code></pre>
</div>
<p>This is much more robust code, as it can deal identically with words
of arbitrary length. Loops are not only for working with strings, they
allow us to do repetitive calculations regardless of data type. Here’s
another loop that calculates the sum of all even numbers between 1 and
10:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co">%LOOP_DEMO   Demo script to explain loops</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="va">total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">even_number</span> <span class="op">=</span> <span class="fl">2</span> <span class="op">:</span> <span class="fl">2</span> <span class="op">:</span> <span class="fl">10</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="va">total</span> <span class="op">=</span> <span class="va">total</span> <span class="op">+</span> <span class="va">even_number</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'The sum of all even numbers between 1 and 10 is:'</span>)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="va">disp</span>(<span class="va">total</span>)</span></code></pre>
</div>
<p>It’s worth tracing the execution of this little program step by
step.</p>
<div id="the-debugger" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-debugger" class="callout-inner">
<h3 class="callout-title">The debugger</h3>
<div class="callout-content">
<p>We can use the MATLAB debugger to trace the execution of a
program.</p>
<p>The first step is to set a <strong>break point</strong> by clicking
just to the right of a line number on the <code>-</code> symbol. A red
circle will appear — this is the break point, and when we run the
script, MATLAB will pause execution at that line.</p>
<p>A green arrow appears, pointing to the next line to be run. To
continue running the program one line at a time, we use the
<code>step</code> button.</p>
<p>We can then inspect variables in the workspace or by hovering the
cursor over where they appear in the code, or get MATLAB to evaluate
expressions in the command window (notice the prompt changes to
<code>K&gt;&gt;</code>).</p>
<p>This process is useful to check your understanding of a program, in
order to correct mistakes.</p>
<p>This process is illustrated below: <img src="../fig/debugger.gif" alt="debugger-demo" class="figure"></p>
</div>
</div>
</div>
<p>Since we want to sum only even numbers, the loop index
<code>even_number</code> starts at 2 and increases by 2 with every
iteration. When we enter the loop, <code>total</code> is zero - the
value assigned to it beforehand. The first time through, the loop body
adds the value of the first even number (2) to the old value of
<code>total</code> (0), and updates <code>total</code> to refer to that
new value. On the next loop iteration, <code>even_number</code> is 4 and
the initial value of <code>total</code> is 2, so the new value assigned
to <code>total</code> is 6. After <code>even_number</code> reaches the
final value (10), <code>total</code> is 30; since this is the end of the
range for <code>even_number</code> the loop finishes and the
<code>disp</code> statements give us the final answer.</p>
<p>Note that a loop variable is just a variable that’s being used to
record progress in a loop. It still exists after the loop is over, and
we can re-use variables previously defined as loop variables as
well:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">even_number</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span></code></pre>
</div>
<div id="performing-exponentiation" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="performing-exponentiation" class="callout-inner">
<h3 class="callout-title">Performing Exponentiation</h3>
<div class="callout-content">
<p>MATLAB uses the caret (<code>^</code>) to perform exponentiation:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">5</span><span class="op">^</span><span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">125</span></span></code></pre>
</div>
<p>You can also use a loop to perform exponentiation. Remember that
<code>b^x</code> is just <code>b*b*b*</code>… <code>x</code> times.</p>
<p>Let a variable <code>b</code> be the base of the number and
<code>x</code> the exponent. Write a loop to compute <code>b^x</code>.
Check your result for <code>b = 4</code> and <code>x = 5</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">% Loop to perform exponentiation</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="va">b</span> <span class="op">=</span> <span class="fl">4</span><span class="op">;</span>    <span class="co">% base</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="va">x</span> <span class="op">=</span> <span class="fl">5</span><span class="op">;</span>    <span class="co">% exponent</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="va">result</span><span class="op">=</span><span class="fl">1</span><span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">x</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="va">result</span> <span class="op">=</span> <span class="va">result</span> <span class="op">*</span> <span class="va">b</span><span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="va">disp</span>([<span class="va">num2str</span>(<span class="va">b</span>)<span class="op">,</span> <span class="ss">'^'</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">x</span>)<span class="op">,</span> <span class="ss">' = '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">result</span>)])</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="incrementing-with-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="incrementing-with-loops" class="callout-inner">
<h3 class="callout-title">Incrementing with Loops</h3>
<div class="callout-content">
<p>Write a loop that spells the word “aluminum,” adding one letter at a
time:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">a</span></span>
<span><span class="va">al</span></span>
<span><span class="va">alu</span></span>
<span><span class="va">alum</span></span>
<span><span class="va">alumi</span></span>
<span><span class="va">alumin</span></span>
<span><span class="va">aluminu</span></span>
<span><span class="va">aluminum</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">% spell a string adding one letter at a time using a loop</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminum'</span><span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">word</span>)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="fl">1</span><span class="op">:</span><span class="va">letter</span>))</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="looping-in-reverse" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="looping-in-reverse" class="callout-inner">
<h3 class="callout-title">Looping in Reverse</h3>
<div class="callout-content">
<p>In MATLAB, the colon operator (<code>:</code>) accepts a <a href="reference.html#stride">stride</a> or skip argument between the
start and stop:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">:</span><span class="fl">11</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1 4 7 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="fl">11</span><span class="op">:-</span><span class="fl">3</span><span class="op">:</span><span class="fl">1</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>11 8 5 2</code></pre>
</div>
<p>Using this, write a loop to print the letters of “aluminum” in
reverse order, one letter per line.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">m</span></span>
<span><span class="va">u</span></span>
<span><span class="va">n</span></span>
<span><span class="va">i</span></span>
<span><span class="va">m</span></span>
<span><span class="va">u</span></span>
<span><span class="va">l</span></span>
<span><span class="va">a</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co">% Spell a string in reverse using a loop</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="va">word</span> <span class="op">=</span> <span class="ss">'aluminum'</span><span class="op">;</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="va">length</span>(<span class="va">word</span>)<span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">word</span>(<span class="va">letter</span>))</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="analyzing-patient-data-from-multiple-files">Analyzing patient data from multiple files<a class="anchor" aria-label="anchor" href="#analyzing-patient-data-from-multiple-files"></a>
</h2>
<hr class="half-width">
<p>We now have almost everything we need to process multiple data files
using a loop and the plotting code in our <code>plot_patient1</code>
script.</p>
<p>We still need to generate a list of data files to process, and then
we can use a loop to repeat the analysis for each file.</p>
<p>We can use the <code>dir</code> command to return a <strong>structure
array</strong> containing the names of the files in the
<code>data</code> directory. Each element in this <em>structure
array</em> is a <strong>structure</strong>, containing information about
a single file in the form of named <strong>fields</strong>.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>files =
  12×1 struct array with fields:
    name
    folder
    date
    bytes
    isdir
    datenum</code></pre>
</div>
<p>To access the <em>name</em> field of the first file, we can use the
following syntax:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">filename</span> <span class="op">=</span> <span class="va">files</span>(<span class="fl">1</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">filename</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>inflammation-01.csv</code></pre>
</div>
<p>To get the modification date of the third file, we can do:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">mod_date</span> <span class="op">=</span> <span class="va">files</span>(<span class="fl">3</span>).<span class="va">date</span><span class="op">;</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">mod_date</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>26-Jul-2015 22:24:31</code></pre>
</div>
<p>A good first step towards processing multiple files is to write a
loop which prints the name of each of our files. Let’s write this in a
script <code>plot_all.m</code> which we will then develop further:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co">%PLOT_ALL	Developing code to automate inflammation analysis</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>	<span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>	<span class="va">disp</span>(<span class="va">file_name</span>)</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot_all</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>inflammation-01.csv
inflammation-02.csv
inflammation-03.csv
inflammation-04.csv
inflammation-05.csv
inflammation-06.csv
inflammation-07.csv
inflammation-08.csv
inflammation-09.csv
inflammation-10.csv
inflammation-11.csv
inflammation-12.csv</code></pre>
</div>
<p>Another task is to generate the file names for the figures we’re
going to save. Let’s name the output file after the data file used to
generate the figure. So for the data set
<code>inflammation-01.csv</code> we will call the figure
<code>inflammation-01.png</code>. We can use the <code>replace</code>
command for this purpose.</p>
<p>The syntax for the <code>replace</code> command is like this:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="va">NEWSTR</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">STR</span><span class="op">,</span> <span class="va">OLD</span><span class="op">,</span> <span class="va">NEW</span>)</span></code></pre>
</div>
<p>So for example if we have the string <code>big_shark</code> and want
to get the string <code>little_shark</code>, we can execute the
following command:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">new_string</span> <span class="op">=</span> <span class="va">replace</span>(<span class="ss">'big_shark'</span><span class="op">,</span> <span class="ss">'big'</span><span class="op">,</span> <span class="ss">'little'</span>)<span class="op">;</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">new_string</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">little_shark</span></span></code></pre>
</div>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>In Octave, the <code>replace</code> function doesn’t exist, but the
<code>strrep</code> function is a direct replacement. The above example
becomes</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">new_string</span> <span class="op">=</span> <span class="va">strep</span>(<span class="ss">'big_shark'</span><span class="op">,</span> <span class="ss">'big'</span><span class="op">,</span> <span class="ss">'little'</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="va">little_shark</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>Recall that we’re saving our figures to the <code>results</code>
directory. The best way to generate a path to a file in MATLAB is by
using the <code>fullfile</code> command. This generates a file path with
the correct separators for the platform you’re using (i.e. forward slash
for Linux and macOS, and backslash for Windows). This makes your code
more portable which is great for collaboration.</p>
<p>Putting these concepts together, we can now generate the paths for
the data files, and the image files we want to save:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co">%PLOT_ALL	Developing code to automate inflammation analysis</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>    <span class="co">% Generate string for image name</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span><span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a></span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">file_name</span>)</span>
<span id="cb39-16"><a href="#cb39-16" tabindex="-1"></a>    <span class="va">disp</span>(<span class="va">img_name</span>)</span>
<span id="cb39-17"><a href="#cb39-17" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>data/inflammation-01.csv
results/inflammation-01.png
data/inflammation-02.csv
results/inflammation-02.png
data/inflammation-03.csv
results/inflammation-03.png
data/inflammation-04.csv
results/inflammation-04.png
data/inflammation-05.csv
results/inflammation-05.png
data/inflammation-06.csv
results/inflammation-06.png
data/inflammation-07.csv
results/inflammation-07.png
data/inflammation-08.csv
results/inflammation-08.png
data/inflammation-09.csv
results/inflammation-09.png
data/inflammation-10.csv
results/inflammation-10.png
data/inflammation-11.csv
results/inflammation-11.png
data/inflammation-12.csv
results/inflammation-12.png</code></pre>
</div>
<p>We’re now ready to modify <code>plot_all.m</code> to actually process
multiple data files:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co">%PLOT_ALL   Print statistics for all patients.</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="co">%           Save plots of statistics to disk.</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="co">% Process each file in turn</span></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a>    <span class="co">% Generate strings for image names:</span></span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb41-12"><a href="#cb41-12" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb41-14"><a href="#cb41-14" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb41-15"><a href="#cb41-15" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span> <span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb41-16"><a href="#cb41-16" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb41-18"><a href="#cb41-18" tabindex="-1"></a></span>
<span id="cb41-19"><a href="#cb41-19" tabindex="-1"></a>    <span class="co">% Create figures</span></span>
<span id="cb41-20"><a href="#cb41-20" tabindex="-1"></a>    <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb41-21"><a href="#cb41-21" tabindex="-1"></a></span>
<span id="cb41-22"><a href="#cb41-22" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb41-23"><a href="#cb41-23" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb41-24"><a href="#cb41-24" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb41-25"><a href="#cb41-25" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb41-26"><a href="#cb41-26" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb41-27"><a href="#cb41-27" tabindex="-1"></a></span>
<span id="cb41-28"><a href="#cb41-28" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb41-29"><a href="#cb41-29" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb41-30"><a href="#cb41-30" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb41-31"><a href="#cb41-31" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb41-32"><a href="#cb41-32" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb41-33"><a href="#cb41-33" tabindex="-1"></a></span>
<span id="cb41-34"><a href="#cb41-34" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb41-35"><a href="#cb41-35" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb41-36"><a href="#cb41-36" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb41-37"><a href="#cb41-37" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb41-38"><a href="#cb41-38" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb41-39"><a href="#cb41-39" tabindex="-1"></a></span>
<span id="cb41-40"><a href="#cb41-40" tabindex="-1"></a>    <span class="va">print</span>(<span class="va">img_name</span><span class="op">,</span> <span class="ss">'-dpng'</span>)</span>
<span id="cb41-41"><a href="#cb41-41" tabindex="-1"></a>    <span class="va">close</span>()</span>
<span id="cb41-42"><a href="#cb41-42" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We run the modified script using its name in the Command Window:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">plot_all</span></span></code></pre>
</div>
<p>The first three figures output to the <code>results</code> directory
are as shown below:</p>
<figure><img src="../fig/inflammation-01.png" style="width:500px; height:400px" class="figure mx-auto d-block"></figure><figure><img src="../fig/inflammation-02.png" style="width:500px; height:400px" class="figure mx-auto d-block"></figure><figure><img src="../fig/inflammation-03.png" style="width:500px; height:400px" class="figure mx-auto d-block"></figure><p>Sure enough, the maxima of these data sets show exactly the same ramp
as the first, and their minima show the same staircase structure.</p>
<p>We’ve now automated the analysis and have confirmed that all the data
files we have looked at show the same artifact. This is what we set out
to test, and now we can just call one script to do it. With minor
modifications, this script could be re-used to check all our future data
files.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>for</code> to create a loop that repeats one or more
operations.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-cond"><p>Content from <a href="06-cond.html">Making Choices</a></p>
<hr>
<p>Last updated on 2025-01-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/06-cond.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 40 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can programs do different things for different data values?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Construct a conditional statement using if, elseif, and else</li>
<li>Test for equality within a conditional statement</li>
<li>Combine conditional tests using AND and OR</li>
<li>Build a nested loop</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Our previous lessons have shown us how to manipulate data and repeat
things. However, the programs we have written so far always do the same
things, regardless of what data they’re given. We want programs to make
choices based on the values they are manipulating.</p>
<p>The tool that MATLAB gives us for doing this is called a <a href="reference.html#conditional-statement">conditional statement</a>,
and it looks like this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">37</span><span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">100</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'greater'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'not greater'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'done'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>not greater
done</code></pre>
</div>
<p>The second line of this code uses the keyword <code>if</code> to tell
MATLAB that we want to make a choice. If the test that follows is true,
the body of the <code>if</code> (i.e., the lines between <code>if</code>
and <code>else</code>) are executed. If the test is false, the body of
the <code>else</code> (i.e., the lines between <code>else</code> and
<code>end</code>) are executed instead. Only one or the other is ever
executed.</p>
<p>Conditional statements don’t have to have an <code>else</code> block.
If there isn’t one, MATLAB simply doesn’t do anything if the test is
false:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'before conditional...'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">100</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'53 is greater than 100'</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="va">disp</span>(<span class="ss">'...after conditional'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>before conditional...
...after conditional</code></pre>
</div>
<p>We can also chain several tests together using <code>elseif</code>.
This makes it simple to write a script that gives the sign of a
number:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co">%CONDITIONAL_DEMO   Demo script to illustrate use of conditionals</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is positive'</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is zero'</span>)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is negative'</span>)</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>One important thing to notice in the code above is that we use a
double equals sign <code>==</code> to test for equality rather than a
single equals sign. This is because the latter is used to mean
assignment. In our test, we want to check for the equality of
<code>num</code> and <code>0</code>, not <em>assign</em> 0 to
<code>num</code>. This convention was inherited from C, and it does take
a bit of getting used to…</p>
<p>During a conditional statement, if one of the conditions is true,
this marks the end of the test: no subsequent conditions will be tested
and execution jumps to the end of the conditional.</p>
<p>Let’s demonstrate this by adding another condition which is true.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">% Demo script to illustrate use of conditionals</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="va">num</span> <span class="op">=</span> <span class="fl">53</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="kw">if</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is positive'</span>)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is zero'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="kw">elseif</span> <span class="va">num</span> <span class="op">&gt;</span> <span class="fl">50</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    <span class="co">% This block will never be executed</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is greater than 50'</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'num is negative'</span>)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We can also combine tests, using <code>&amp;&amp;</code> (and) and
<code>||</code> (or). <code>&amp;&amp;</code> is true if both tests are
true:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">if</span> ((<span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>) <span class="op">&amp;&amp;</span> (<span class="op">-</span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>))</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'both parts are true'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'one part is not true'</span>)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>one part is not true</code></pre>
</div>
<p><code>||</code> is true if either test is true:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">if</span> (<span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">0</span>) <span class="op">||</span> (<span class="fl">3</span> <span class="op">&lt;</span> <span class="fl">4</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'at least one part is true'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>at least one part is true</code></pre>
</div>
<p>In this case, “either” means “either or both”, not “either one or the
other but not both”.</p>
<div id="true-and-false-statements" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="true-and-false-statements" class="callout-inner">
<h3 class="callout-title">True and False Statements</h3>
<div class="callout-content">
<p>The conditions we have tested above evaluate to a logical value:
<code>true</code> or <code>false</code>. However these numerical
comparison tests aren’t the only values which are <code>true</code> or
<code>false</code> in MATLAB. For example, <code>1</code> is considered
<code>true</code> and <code>0</code> is considered <code>false</code>.
In fact, <em>any</em> value can be used in a conditional statement.</p>
<p>Run the code below in order to discover which values are considered
<code>true</code> and which are considered <code>false</code>.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">if</span> <span class="ss">''</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty string is true'</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty string is false'</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="kw">if</span> <span class="ss">'foo'</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty string is true'</span>)</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty string is false'</span>)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="kw">if</span> []</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty array is true'</span>)</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'empty array is false'</span>)</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="kw">if</span> [<span class="fl">22.5</span><span class="op">,</span> <span class="fl">1.0</span>]</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty array is true'</span>)</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'non empty array is false'</span>)</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a></span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a><span class="kw">if</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span>]</span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'array of zeros is true'</span>)</span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'array of zeros is false'</span>)</span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a></span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a><span class="kw">if</span> <span class="va">true</span></span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'true is true'</span>)</span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a>    <span class="va">disp</span>(<span class="ss">'true is false'</span>)</span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="close-enough" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="close-enough" class="callout-inner">
<h3 class="callout-title">Close Enough</h3>
<div class="callout-content">
<p>Write a script called <code>near</code> that performs a test on two
variables, and displays <code>1</code> when the first variable is within
10% of the other and <code>0</code> otherwise. Compare your
implementation with your partner’s: do you get the same answer for all
possible pairs of numbers?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co">%NEAR   Display 1 if variable a is within 10% of variable b</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">%       and display 0 otherwise</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="va">a</span> <span class="op">=</span> <span class="fl">1.1</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="va">b</span> <span class="op">=</span> <span class="fl">1.2</span><span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="kw">if</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span> <span class="op">&gt;=</span> <span class="fl">0.9</span> <span class="op">&amp;&amp;</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span> <span class="op">&lt;=</span> <span class="fl">1.1</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="va">disp</span>(<span class="fl">1</span>)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    <span class="va">disp</span>(<span class="fl">0</span>)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Another thing to realize is that <code>if</code> statements can also
be combined with loops. For example, if we want to sum the positive
numbers in a list, we can write this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="va">numbers</span> <span class="op">=</span> [<span class="op">-</span><span class="fl">5</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="op">-</span><span class="fl">1</span><span class="op">,</span> <span class="fl">9</span><span class="op">,</span> <span class="fl">6</span>]<span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="va">total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">n</span> <span class="op">=</span> <span class="va">numbers</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">0</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>        <span class="va">total</span> <span class="op">=</span> <span class="va">total</span> <span class="op">+</span> <span class="va">n</span><span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="va">disp</span>([<span class="ss">'sum of positive values: '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">total</span>)])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sum of positive values: 20</code></pre>
</div>
<p>With a little extra effort, we can calculate the positive and
negative sums in a loop:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="va">pos_total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="va">neg_total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">n</span> <span class="op">=</span> <span class="va">numbers</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">0</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>        <span class="va">pos_total</span> <span class="op">=</span> <span class="va">pos_total</span> <span class="op">+</span> <span class="va">n</span><span class="op">;</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>        <span class="va">neg_total</span> <span class="op">=</span> <span class="va">neg_total</span> <span class="op">+</span> <span class="va">n</span><span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="va">disp</span>([<span class="ss">'sum of positive values: '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">pos_total</span>)])</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="va">disp</span>([<span class="ss">'sum of negative values: '</span><span class="op">,</span> <span class="va">num2str</span>(<span class="va">neg_total</span>)])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sum of positive values: 20
sum of negative values: -6</code></pre>
</div>
<p>We can even put one loop inside another:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">for</span> <span class="va">number</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="ss">'ab'</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>        <span class="va">disp</span>([<span class="va">num2str</span>(<span class="va">number</span>)<span class="op">,</span> <span class="va">letter</span>])</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1a
1b
2a
2b
3a
3b</code></pre>
</div>
<div id="nesting" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="nesting" class="callout-inner">
<h3 class="callout-title">Nesting</h3>
<div class="callout-content">
<p>Will changing the order of nesting in the above loop change the
output? Why? Write down the output you might expect from changing the
order of the loops, then rewrite the code to test your hypothesis.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">for</span> <span class="va">letter</span> <span class="op">=</span> <span class="ss">'ab'</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">number</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>        <span class="va">disp</span>([<span class="va">num2str</span>(<span class="va">number</span>)<span class="op">,</span> <span class="va">letter</span>])</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Reordering the nested loops changes the output. In the new code, the
number loop happens within the letter loop, so while letter = a, number
takes the values 1, 2, and 3 in turn.</p>
</div>
</div>
</div>
</div>
<p>Currently, our script <code>plot_all.m</code> reads in data, analyzes
it, and saves plots of the results. If we would rather display the plots
interactively, we would have to remove (or <em>comment out</em>) the
following code:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="va">print</span>(<span class="va">img_name</span><span class="op">,</span><span class="ss">'-dpng'</span>)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="va">close</span>()</span></code></pre>
</div>
<p>And, we’d also have to change this line of code, from:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span></code></pre>
</div>
<p>to:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'on'</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co">% or equivalently: figure()</span></span></code></pre>
</div>
<p>This is not a lot of code to change every time, but it’s still work
that’s easily avoided using conditionals. Here’s our script re-written
to use <em>conditionals</em> to switch between saving plots as images
and plotting them interactively:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co">%PLOT_ALL  Save plots of statistics to disk.</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="co">%          Use variable plot_switch to control interactive plotting</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="co">%          vs saving images to disk.</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co">%            plot_switch = 0: show plots interactively</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">%            plot_switch = 1: save plots to disk</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="va">plot_switch</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="co">% Process each file in turn</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>    <span class="co">% Generate strings for image names:</span></span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>    <span class="co">% Generate path to data file and image file</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>    <span class="va">img_name</span>  <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'results'</span><span class="op">,</span> <span class="va">img_name</span>)<span class="op">;</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a></span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a>    <span class="co">% Create figures</span></span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">plot_switch</span> <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a>        <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a>        <span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'on'</span>)</span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Average'</span>)</span>
<span id="cb23-34"><a href="#cb23-34" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb23-35"><a href="#cb23-35" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb23-36"><a href="#cb23-36" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb23-38"><a href="#cb23-38" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb23-39"><a href="#cb23-39" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Max'</span>)</span>
<span id="cb23-40"><a href="#cb23-40" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb23-41"><a href="#cb23-41" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb23-42"><a href="#cb23-42" tabindex="-1"></a></span>
<span id="cb23-43"><a href="#cb23-43" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb23-44"><a href="#cb23-44" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb23-45"><a href="#cb23-45" tabindex="-1"></a>    <span class="va">title</span>(<span class="ss">'Min'</span>)</span>
<span id="cb23-46"><a href="#cb23-46" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'Inflammation'</span>)</span>
<span id="cb23-47"><a href="#cb23-47" tabindex="-1"></a>    <span class="va">xlabel</span>(<span class="ss">'Day'</span>)</span>
<span id="cb23-48"><a href="#cb23-48" tabindex="-1"></a></span>
<span id="cb23-49"><a href="#cb23-49" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">plot_switch</span> <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb23-50"><a href="#cb23-50" tabindex="-1"></a>        <span class="va">print</span>(<span class="va">img_name</span><span class="op">,</span> <span class="ss">'-dpng'</span>)</span>
<span id="cb23-51"><a href="#cb23-51" tabindex="-1"></a>        <span class="va">close</span>()</span>
<span id="cb23-52"><a href="#cb23-52" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb23-53"><a href="#cb23-53" tabindex="-1"></a></span>
<span id="cb23-54"><a href="#cb23-54" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>if</code> and <code>else</code> to make choices based on
values in your program.</li>
</ul>
</div>
</div>
</div></section><section id="aio-07-func"><p>Content from <a href="07-func.html">Creating Functions</a></p>
<hr>
<p>Last updated on 2025-01-07 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/07-func.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 65 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I teach MATLAB how to do new things?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Compare and contrast MATLAB function files with MATLAB scripts.</li>
<li>Define a function that takes arguments.</li>
<li>Test a function.</li>
<li>Recognize why we should divide programs into small, single-purpose
functions.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>If we only had one data set to analyze, it would probably be faster
to load the file into a spreadsheet and use that to plot some simple
statistics. But we have twelve files to check, and may have more in
future. In this lesson, we’ll learn how to write a function so that we
can repeat several operations with a single command.</p>
<p>Let’s start by defining a function <code>fahr_to_kelvin</code> that
converts temperatures from Fahrenheit to Kelvin:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">ktemp</span> <span class="op">=</span> <span class="va">fahr_to_kelvin</span>(<span class="va">ftemp</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="co">%FAHR_TO_KELVIN   Convert Fahrenheit to Kelvin</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="va">ktemp</span> <span class="op">=</span> ((<span class="va">ftemp</span> <span class="op">-</span> <span class="fl">32</span>) <span class="op">*</span> (<span class="fl">5</span><span class="op">/</span><span class="fl">9</span>)) <span class="op">+</span> <span class="fl">273.15</span><span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>A MATLAB function <em>must</em> be saved in a text file with a
<code>.m</code> extension. The name of that file must be the same as the
function defined inside it. The name must start with a letter and cannot
contain spaces. So, you will need to save the above code in a file
called <code>fahr_to_kelvin.m</code>. Remember to save your m-files in
the current directory.</p>
<p>The first line of our function is called the <em>function
definition</em>, and it declares that we’re writing a function named
<code>fahr_to_kelvin</code>, that has a single input
parameter,<code>ftemp</code>, and a single output parameter,
<code>ktemp</code>. Anything following the function definition line is
called the <em>body</em> of the function. The keyword <code>end</code>
marks the end of the function body, and the function won’t know about
any code after <code>end</code>.</p>
<figure><img src="../fig/function_definition.png" alt="function-definition" class="figure mx-auto d-block"></figure><p>A function can have multiple input and output parameters if required,
but isn’t required to have any of either. The general form of a function
is shown in the pseudo-code below:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">function</span> [<span class="va">out1</span><span class="op">,</span> <span class="va">out2</span>] <span class="op">=</span> <span class="va">function_name</span>(<span class="va">in1</span><span class="op">,</span> <span class="va">in2</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="co">%FUNCTION_NAME   Function description</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="co">% This section below is called the body of the function</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="va">out1</span> <span class="op">=</span> <span class="va">something</span> <span class="va">calculated</span><span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="va">out2</span> <span class="op">=</span> <span class="va">something</span> <span class="kw">else</span><span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Just as we saw with scripts, functions must be <em>visible</em> to
MATLAB, i.e., a file containing a function has to be placed in a
directory that MATLAB knows about. The most convenient of those
directories is the current working directory.</p>
<div id="gnu-octave" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="gnu-octave" class="callout-inner">
<h3 class="callout-title">GNU Octave</h3>
<div class="callout-content">
<p>In common with MATLAB, Octave searches the current working directory
and the path for functions called from the command line.</p>
</div>
</div>
</div>
<p>We can call our function from the command line like any other MATLAB
function:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">fahr_to_kelvin</span>(<span class="fl">32</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">273.15</span></span></code></pre>
</div>
<p>When we pass a value, like <code>32</code>, to the function, the
value is assigned to the variable <code>ftemp</code> so that it can be
used inside the function. If we want to return a value from the
function, we must assign that value to a variable named
<code>ktemp</code>-–in the first line of our function, we promised that
the output of our function would be named <code>ktemp</code>.</p>
<p>Outside of the function, the variables <code>ftemp</code> and
<code>ktemp</code> aren’t visible; they are only used by the function
body to refer to the input and output values.</p>
<p>This is one of the major differences between scripts and functions: a
script can be thought of as automating the command line, with full
access to all variables in the base workspace, whereas a function can
only read and write variables from the calling workspace if they are
passed as arguments — i.e. a function has its own separate
workspace.</p>
<p>Now that we’ve seen how to convert Fahrenheit to Kelvin, it’s easy to
convert Kelvin to Celsius.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">ctemp</span> <span class="op">=</span> <span class="va">kelvin_to_celsius</span>(<span class="va">ktemp</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="co">%KELVIN_TO_CELSIUS   Convert from Kelvin to Celcius</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="va">ctemp</span> <span class="op">=</span> <span class="va">ktemp</span> <span class="op">-</span> <span class="fl">273.15</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Again, we can call this function like any other:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">kelvin_to_celsius</span>(<span class="fl">0.0</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="op">-</span><span class="fl">273.15</span></span></code></pre>
</div>
<p>What about converting Fahrenheit to Celsius? We could write out the
formula, but we don’t need to. Instead, we can <a href="reference.html#function-composition">compose</a> the two functions
we have already created:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">ctemp</span> <span class="op">=</span> <span class="va">fahr_to_celsius</span>(<span class="va">ftemp</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    <span class="co">%FAHR_TO_CELSIUS   Convert Fahrenheit to Celcius</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="va">ktemp</span> <span class="op">=</span> <span class="va">fahr_to_kelvin</span>(<span class="va">ftemp</span>)<span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    <span class="va">ctemp</span> <span class="op">=</span> <span class="va">kelvin_to_celsius</span>(<span class="va">ktemp</span>)<span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Calling this function,</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">fahr_to_celsius</span>(<span class="fl">32.0</span>)</span></code></pre>
</div>
<p>we get, as expected:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ans</span> <span class="op">=</span> <span class="fl">0</span></span></code></pre>
</div>
<p>This is our first taste of how larger programs are built: we define
basic operations, then combine them in ever-larger chunks to get the
effect we want. Real-life functions will usually be larger than the ones
shown here—typically half a dozen to a few dozen lines—but they
shouldn’t ever be much longer than that, or the next person who reads it
won’t be able to understand what’s going on.</p>
<div id="concatenating-in-a-function" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="concatenating-in-a-function" class="callout-inner">
<h3 class="callout-title">Concatenating in a Function</h3>
<div class="callout-content">
<p>In MATLAB, we concatenate strings by putting them into an array or
using the <code>strcat</code> function:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="ss">'abra'</span><span class="op">,</span> <span class="ss">'cad'</span><span class="op">,</span> <span class="ss">'abra'</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">abracadabra</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">strcat</span>(<span class="ss">'a'</span><span class="op">,</span> <span class="ss">'b'</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ab</span></span></code></pre>
</div>
<p>Write a function called <code>fence</code> that has two parameters,
<code>original</code> and <code>wrapper</code> and adds
<code>wrapper</code> before and after <code>original</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">fence</span>(<span class="ss">'name'</span><span class="op">,</span> <span class="ss">'*'</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>*name*</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">wrapped</span> <span class="op">=</span> <span class="va">fence</span>(<span class="va">original</span><span class="op">,</span> <span class="va">wrapper</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>    <span class="co">%FENCE   Return original string, with wrapper prepended and appended</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="va">wrapped</span> <span class="op">=</span> <span class="va">strcat</span>(<span class="va">wrapper</span><span class="op">,</span> <span class="va">original</span><span class="op">,</span> <span class="va">wrapper</span>)<span class="op">;</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="getting-the-outside" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="getting-the-outside" class="callout-inner">
<h3 class="callout-title">Getting the Outside</h3>
<div class="callout-content">
<p>If the variable <code>s</code> refers to a string, then
<code>s(1)</code> is the string’s first character and
<code>s(end)</code> is its last. Write a function called
<code>outer</code> that returns a string made up of just the first and
last characters of its input:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>(<span class="va">outer</span>(<span class="ss">'helium'</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">hm</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">ends</span> <span class="op">=</span> <span class="va">outer</span>(<span class="va">s</span>)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="co">%OUTER   Return first and last characters from a string</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    <span class="va">ends</span> <span class="op">=</span> <span class="va">strcat</span>(<span class="va">s</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">s</span>(<span class="kw">end</span>))<span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="variables-inside-and-outside-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variables-inside-and-outside-functions" class="callout-inner">
<h3 class="callout-title">Variables Inside and Outside Functions</h3>
<div class="callout-content">
<p>Consider our function <code>fahr_to_kelvin</code> from earlier in the
episode:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">ktemp</span> <span class="op">=</span> <span class="va">fahr_to_kelvin</span>(<span class="va">ftemp</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="co">%FAHR_TO_KELVIN   Convert Fahrenheit to Kelvin</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="va">ktemp</span> <span class="op">=</span> ((<span class="va">ftemp</span><span class="op">-</span><span class="fl">32</span>)<span class="op">*</span>(<span class="fl">5.0</span><span class="op">/</span><span class="fl">9.0</span>)) <span class="op">+</span> <span class="fl">273.15</span><span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>What does the following code display when run — and why?</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="va">ftemp</span> <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="va">ktemp</span> <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="va">disp</span>(<span class="va">fahr_to_kelvin</span>(<span class="fl">8</span>))</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="va">disp</span>(<span class="va">fahr_to_kelvin</span>(<span class="fl">41</span>))</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="va">disp</span>(<span class="va">fahr_to_kelvin</span>(<span class="fl">32</span>))</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="va">disp</span>(<span class="va">ktemp</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">259.8167</span></span>
<span><span class="fl">278.1500</span></span>
<span><span class="fl">273.1500</span></span>
<span><span class="fl">0</span></span></code></pre>
</div>
<p><code>ktemp</code> is 0 because the function
<code>fahr_to_kelvin</code> has no knowledge of the variable
<code>ktemp</code> which exists outside of the function.</p>
</div>
</div>
</div>
</div>
<p>Once we start putting things in functions so that we can re-use them,
we need to start testing that those functions are working correctly. To
see how to do this, let’s write a function to center a dataset around a
particular value:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">out</span> <span class="op">=</span> <span class="va">center</span>(<span class="va">data</span><span class="op">,</span> <span class="va">desired</span>)</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>    <span class="va">out</span> <span class="op">=</span> (<span class="va">data</span> <span class="op">-</span> <span class="va">mean</span>(<span class="va">data</span>(<span class="op">:</span>))) <span class="op">+</span> <span class="va">desired</span><span class="op">;</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>We could test this on our actual data, but since we don’t know what
the values ought to be, it will be hard to tell if the result was
correct, Instead, let’s create a matrix of 0’s, and then center that
around 3:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">z</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">center</span>(<span class="va">z</span><span class="op">,</span> <span class="fl">3</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ans =

   3   3
   3   3</code></pre>
</div>
<p>That looks right, so let’s try out <code>center</code> function on
our real data:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="ss">'data/inflammation-01.csv'</span>)<span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">centered</span> <span class="op">=</span> <span class="va">center</span>(<span class="va">data</span>(<span class="op">:</span>)<span class="op">,</span> <span class="fl">0</span>)</span></code></pre>
</div>
<p>It’s hard to tell from the default output whether the result is
correct–this is often the case when working with fairly large
arrays–but, there are a few simple tests that will reassure us.</p>
<p>Let’s calculate some simple statistics:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="va">min</span>(<span class="va">data</span>(<span class="op">:</span>))<span class="op">,</span> <span class="va">mean</span>(<span class="va">data</span>(<span class="op">:</span>))<span class="op">,</span> <span class="va">max</span>(<span class="va">data</span>(<span class="op">:</span>))])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0.00000    6.14875   20.00000</code></pre>
</div>
<p>And let’s do the same after applying our <code>center</code> function
to the data:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">disp</span>([<span class="va">min</span>(<span class="va">centered</span>(<span class="op">:</span>))<span class="op">,</span> <span class="va">mean</span>(<span class="va">centered</span>(<span class="op">:</span>))<span class="op">,</span> <span class="va">max</span>(<span class="va">centered</span>(<span class="op">:</span>))])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   -6.1487   -0.0000   13.8513</code></pre>
</div>
<p>That seems almost right: the original mean was about 6.1, so the
lower bound from zero is now about -6.1. The mean of the centered data
isn’t quite zero–we’ll explore why not in the challenges–but it’s pretty
close. We can even go further and check that the standard deviation
hasn’t changed:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">std</span>(<span class="va">data</span>(<span class="op">:</span>)) <span class="op">-</span> <span class="va">std</span>(<span class="va">centered</span>(<span class="op">:</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">5.3291e-15</span></span></code></pre>
</div>
<p>The difference is very small. It’s still possible that our function
is wrong, but it seems unlikely enough that we should probably get back
to doing our analysis. We have one more task first, though: we should
write some <a href="reference.html#documentation">documentation</a> for
our function to remind ourselves later what it’s for and how to use
it.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">out</span> <span class="op">=</span> <span class="va">center</span>(<span class="va">data</span><span class="op">,</span> <span class="va">desired</span>)</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>    <span class="co">%CENTER   Center data around a desired value.</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>    <span class="co">%</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>    <span class="co">%       center(DATA, DESIRED)</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>    <span class="co">%</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a>    <span class="co">%   Returns a new array containing the values in</span></span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a>    <span class="co">%   DATA centered around the value.</span></span>
<span id="cb34-8"><a href="#cb34-8" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" tabindex="-1"></a>    <span class="va">out</span> <span class="op">=</span> (<span class="va">data</span>  <span class="op">-</span> <span class="va">mean</span>(<span class="va">data</span>(<span class="op">:</span>))) <span class="op">+</span> <span class="va">desired</span><span class="op">;</span></span>
<span id="cb34-10"><a href="#cb34-10" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Comment lines immediately below the function definition line are
called “help text”. Typing <code>help function_name</code> brings up the
help text for that function:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">help</span> <span class="va">center</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Center   Center data around a desired value.

    center(DATA, DESIRED)

Returns a new array containing the values in
DATA centered around the value.</code></pre>
</div>
<div id="testing-a-function" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="testing-a-function" class="callout-inner">
<h3 class="callout-title">Testing a Function</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Write a function called <code>normalise</code> that takes an
array as input and returns an array of the same shape with its values
scaled to lie in the range 0.0 to 1.0. (If L and H are the lowest and
highest values in the input array, respectively, then the function
should map a value v to (v - L)/(H - L).) Be sure to give the function a
comment block explaining its use.</p></li>
<li><p>Run <code>help linspace</code> to see how to use
<code>linspace</code> to generate regularly-spaced values. Use arrays
like this to test your <code>normalise</code> function.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>
</li></ol>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">out</span> <span class="op">=</span> <span class="va">normalise</span>(<span class="va">in</span>)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>    <span class="co">%NORMALISE   Return original array, normalised so that the</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>    <span class="co">%            new values lie in the range 0 to 1.</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>    <span class="va">H</span> <span class="op">=</span> <span class="va">max</span>(<span class="va">max</span>(<span class="va">in</span>))<span class="op">;</span></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>    <span class="va">L</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">min</span>(<span class="va">in</span>))<span class="op">;</span></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>    <span class="va">out</span> <span class="op">=</span> (<span class="va">in</span><span class="op">-</span><span class="va">L</span>)<span class="op">/</span>(<span class="va">H</span><span class="op">-</span><span class="va">L</span>)<span class="op">;</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>
</li></ol>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="va">a</span> <span class="op">=</span> <span class="va">linspace</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">10</span>)<span class="op">;</span>   <span class="co">% Create evenly-spaced vector</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="va">norm_a</span> <span class="op">=</span> <span class="va">normalise</span>(<span class="va">a</span>)<span class="op">;</span> <span class="co">% Normalise vector</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="va">plot</span>(<span class="va">a</span><span class="op">,</span> <span class="va">norm_a</span>)        <span class="co">% Visually check normalisation</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="convert-a-script-into-a-function" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="convert-a-script-into-a-function" class="callout-inner">
<h3 class="callout-title">Convert a script into a function</h3>
<div class="callout-content">
<p>Write a function called <code>plot_dataset</code> which plots the
three summary graphs (max, min, std) for a given inflammation data
file.</p>
<p>The function should operate on a single data file, and should have
two parameters: <code>file_name</code> and <code>plot_switch</code>.
When called, the function should create the three graphs produced in the
previous lesson. Whether they are displayed or saved to the
<code>results</code> directory should be controlled by the value of
<code>plot_switch</code>
i.e. <code>plot_dataset('data/inflammation-01.csv', 0)</code> should
display the corresponding graphs for the first data set;
<code>plot_dataset('data/inflammation-02.csv', 1)</code> should save the
figures for the second dataset to the <code>results</code>
directory.</p>
<p>You should mostly be reusing code from the <code>plot_all</code>
script.</p>
<p>Be sure to give your function help text.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">plot_dataset</span>(<span class="va">file_name</span><span class="op">,</span> <span class="va">plot_switch</span>)</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>    <span class="co">%PLOT_DATASET    Perform analysis for named data file.</span></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>    <span class="co">%   Create figures to show average, max and min inflammation.</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>    <span class="co">%   Display plots in GUI using plot_switch = 0,</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>    <span class="co">%   or save to disk using plot_switch = 1.</span></span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>    <span class="co">%</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a>    <span class="co">%   Example:</span></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>    <span class="co">%       plot_dataset('data/inflammation-01.csv', 0)</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a>    </span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a>    <span class="co">% Generate string for image name:</span></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">file_name</span><span class="op">,</span> <span class="ss">'.csv'</span><span class="op">,</span> <span class="ss">'.png'</span>)<span class="op">;</span></span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a>    <span class="va">img_name</span> <span class="op">=</span> <span class="va">replace</span>(<span class="va">img_name</span><span class="op">,</span> <span class="ss">'data'</span><span class="op">,</span> <span class="ss">'results'</span>)<span class="op">;</span></span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a>    <span class="va">patient_data</span> <span class="op">=</span> <span class="va">readmatrix</span>(<span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a>    </span>
<span id="cb39-16"><a href="#cb39-16" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">plot_switch</span> <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb39-17"><a href="#cb39-17" tabindex="-1"></a>    	<span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'off'</span>)</span>
<span id="cb39-18"><a href="#cb39-18" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb39-19"><a href="#cb39-19" tabindex="-1"></a>    	<span class="va">figure</span>(<span class="ss">'visible'</span><span class="op">,</span> <span class="ss">'on'</span>)</span>
<span id="cb39-20"><a href="#cb39-20" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb39-21"><a href="#cb39-21" tabindex="-1"></a>    </span>
<span id="cb39-22"><a href="#cb39-22" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb39-23"><a href="#cb39-23" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">mean</span>(<span class="va">patient_data</span><span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb39-24"><a href="#cb39-24" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'average'</span>)</span>
<span id="cb39-25"><a href="#cb39-25" tabindex="-1"></a>    </span>
<span id="cb39-26"><a href="#cb39-26" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">2</span>)</span>
<span id="cb39-27"><a href="#cb39-27" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">max</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb39-28"><a href="#cb39-28" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'max'</span>)</span>
<span id="cb39-29"><a href="#cb39-29" tabindex="-1"></a>    </span>
<span id="cb39-30"><a href="#cb39-30" tabindex="-1"></a>    <span class="va">subplot</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">2</span><span class="op">,</span> <span class="fl">3</span>)</span>
<span id="cb39-31"><a href="#cb39-31" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">min</span>(<span class="va">patient_data</span><span class="op">,</span> []<span class="op">,</span> <span class="fl">1</span>))</span>
<span id="cb39-32"><a href="#cb39-32" tabindex="-1"></a>    <span class="va">ylabel</span>(<span class="ss">'min'</span>)</span>
<span id="cb39-33"><a href="#cb39-33" tabindex="-1"></a>    </span>
<span id="cb39-34"><a href="#cb39-34" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">plot_switch</span> <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb39-35"><a href="#cb39-35" tabindex="-1"></a>        <span class="va">print</span>(<span class="va">img_name</span><span class="op">,</span> <span class="ss">'-dpng'</span>)</span>
<span id="cb39-36"><a href="#cb39-36" tabindex="-1"></a>        <span class="va">close</span>()</span>
<span id="cb39-37"><a href="#cb39-37" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb39-38"><a href="#cb39-38" tabindex="-1"></a> <span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="automate-the-analysis-for-all-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="automate-the-analysis-for-all-files" class="callout-inner">
<h3 class="callout-title">Automate the analysis for all files</h3>
<div class="callout-content">
<p>Modify the <code>plot_all</code> script so that as it loops over the
data files, it calls the function <code>plot_dataset</code> for each
file in turn. Your script should save the image files to the ‘results’
directory rather than displaying the figures in the MATLAB GUI.</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="co">%PLOT_ALL    Analyse all inflammation datasets</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="co">%   Create figures to show average, max and min inflammation.</span></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="co">%   Save figures to 'results' directory.</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a><span class="va">files</span> <span class="op">=</span> <span class="va">dir</span>(<span class="ss">'data/inflammation-*.csv'</span>)<span class="op">;</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">files</span>)</span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">files</span>(<span class="va">i</span>).<span class="va">name</span><span class="op">;</span></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a>    <span class="va">file_name</span> <span class="op">=</span> <span class="va">fullfile</span>(<span class="ss">'data'</span><span class="op">,</span> <span class="va">file_name</span>)<span class="op">;</span></span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a>    <span class="co">% Process each data set, saving figures to disk.</span></span>
<span id="cb40-12"><a href="#cb40-12" tabindex="-1"></a>    <span class="va">plot_dataset</span>(<span class="va">file_name</span><span class="op">,</span> <span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb40-13"><a href="#cb40-13" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>We have now solved our original problem: we can analyze any number of
data files with a single command. More importantly, we have met two of
the most important ideas in programming:</p>
<ol style="list-style-type: decimal">
<li><p>Use arrays to store related values, and loops to repeat
operations on them.</p></li>
<li><p>Use functions to make code easier to re-use and easier to
understand.</p></li>
</ol>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Break programs up into short, single-purpose functions with
meaningful names.</li>
<li>Define functions using the <code>function</code> keyword.</li>
</ul>
</div>
</div>
</div></section><section id="aio-08-defensive"><p>Content from <a href="08-defensive.html">Defensive Programming</a></p>
<hr>
<p>Last updated on 2025-01-08 |

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/episodes/08-defensive.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I make sure my programs are correct?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what an assertion is.</li>
<li>Add assertions to programs that correctly check the program’s
state.</li>
<li>Correctly add precondition and postcondition assertions to
functions.</li>
<li>Explain what test-driven development is, and use it when creating
new functions.</li>
<li>Explain why variables should be initialized using actual data values
rather than arbitrary constants.</li>
<li>Debug code containing an error systematically.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Our previous lessons have introduced the basic tools of programming:
variables and lists, file I/O, loops, conditionals, and functions. What
they <em>haven’t</em> done is show us how to tell whether a program is
getting the right answer, and how to tell if it’s <em>still</em> getting
the right answer as we make changes to it.</p>
<p>To achieve that, we need to:</p>
<ul>
<li>write programs that check their own operation,</li>
<li>write and run tests for widely-used functions, and</li>
<li>make sure we know what “correct” actually means.</li>
</ul>
<p>The good news is, doing these things will speed up our programming,
not slow it down.</p>
<p>The first step toward getting the right answers from our programs is
to assume that mistakes <em>will</em> happen and to guard against them.
This is called <a href="reference.html#defensive-programming">defensive
programming</a>, and the most common way to do it is to add <a href="reference.html#assertion">assertions</a> to our code so that it
checks itself as it runs. An assertion is simply a statement that
something must be true at a certain point in a program. When MATLAB sees
one, it checks the assertion’s condition. If it’s true, MATLAB does
nothing, but if it’s false, MATLAB halts the program immediately and
prints an error message. For example, this piece of code halts as soon
as the loop encounters a value that isn’t positive:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">numbers</span> <span class="op">=</span> [<span class="fl">1.5</span><span class="op">,</span> <span class="fl">2.3</span><span class="op">,</span> <span class="fl">0.7</span><span class="op">,</span> <span class="op">-</span><span class="fl">0.001</span><span class="op">,</span> <span class="fl">4.4</span>]<span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="va">total</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="kw">for</span> <span class="va">n</span> <span class="op">=</span> <span class="va">numbers</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="va">assert</span>(<span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">0</span>)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="va">total</span> <span class="op">=</span> <span class="va">total</span> <span class="op">+</span> <span class="va">n</span><span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>error: assert (n &gt;= 0) failed</code></pre>
</div>
<p>Programs like the Firefox browser are full of assertions: 10-20% of
the code they contain are there to check that the other 80-90% are
working correctly. Broadly speaking, assertions fall into three
categories:</p>
<ul>
<li>A <a href="reference.html#precondition">precondition</a> is
something that must be true at the start of a function in order for it
to work correctly.</li>
<li>A postcondition is something that the function guarantees is true
when it finishes.</li>
<li>An invariant is something that is always true at a particular point
inside a piece of code.</li>
</ul>
<p>For example, suppose we are representing rectangles using an array of
four coordinates <code>(x0, y0, x1, y1)</code>, such that (x0,y0) are
the bottom left coordinates, and (x1,y1) are the top right coordinates.
In order to do some calculations, we need to normalize the rectangle so
that it is at the origin, measures 1.0 units on its longest axis, and is
oriented so the longest axis is the y axis. Here is a function that does
that, but checks that its input is correctly formatted and that its
result makes sense:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">normalized</span> <span class="op">=</span> <span class="va">normalize_rectangle</span>(<span class="va">rect</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    <span class="co">%NORMALIZE_RECTANGLE</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    <span class="co">% Normalizes a rectangle so that it is at the origin</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="co">% measures 1.0 units on its longest axis</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="co">% and is oriented with the longest axis in the y direction:</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    <span class="va">assert</span>(<span class="va">length</span>(<span class="va">rect</span>) <span class="op">==</span> <span class="fl">4</span><span class="op">,</span> <span class="ss">'Rectangle must contain 4 coordinates'</span>)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="va">x0</span> <span class="op">=</span> <span class="va">rect</span>(<span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    <span class="va">y0</span> <span class="op">=</span> <span class="va">rect</span>(<span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>    <span class="va">x1</span> <span class="op">=</span> <span class="va">rect</span>(<span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    <span class="va">y1</span> <span class="op">=</span> <span class="va">rect</span>(<span class="fl">4</span>)<span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>    <span class="va">assert</span>(<span class="va">x0</span> <span class="op">&lt;</span> <span class="va">x1</span><span class="op">,</span> <span class="ss">'Invalid X coordinates'</span>)</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>    <span class="va">assert</span>(<span class="va">y0</span> <span class="op">&lt;</span> <span class="va">y1</span><span class="op">,</span> <span class="ss">'Invalid Y coordinates'</span>)</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>    <span class="va">dx</span> <span class="op">=</span> <span class="va">x1</span> <span class="op">-</span> <span class="va">x0</span><span class="op">;</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>    <span class="va">dy</span> <span class="op">=</span> <span class="va">y1</span> <span class="op">-</span> <span class="va">y0</span><span class="op">;</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">dx</span> <span class="op">&gt;</span> <span class="va">dy</span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>        <span class="va">scaled</span> <span class="op">=</span> <span class="va">dx</span><span class="op">/</span><span class="va">dy</span><span class="op">;</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>        <span class="va">upper_x</span> <span class="op">=</span> <span class="va">scaled</span><span class="op">;</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>        <span class="va">upper_y</span> <span class="op">=</span> <span class="fl">1.0</span><span class="op">;</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>        <span class="va">scaled</span> <span class="op">=</span> <span class="va">dx</span><span class="op">/</span><span class="va">dy</span><span class="op">;</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a>        <span class="va">upper_x</span> <span class="op">=</span> <span class="va">scaled</span><span class="op">;</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>        <span class="va">upper_y</span> <span class="op">=</span> <span class="fl">1.0</span><span class="op">;</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a>    <span class="va">assert</span> ((<span class="fl">0</span> <span class="op">&lt;</span> <span class="va">upper_x</span>) <span class="op">&amp;&amp;</span> (<span class="va">upper_x</span> <span class="op">&lt;=</span> <span class="fl">1.0</span>)<span class="op">,</span> <span class="ss">'Calculated upper X coordinate invalid'</span>)<span class="op">;</span></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a>    <span class="va">assert</span> ((<span class="fl">0</span> <span class="op">&lt;</span> <span class="va">upper_y</span>) <span class="op">&amp;&amp;</span> (<span class="va">upper_y</span> <span class="op">&lt;=</span> <span class="fl">1.0</span>)<span class="op">,</span> <span class="ss">'Calculated upper Y coordinate invalid'</span>)<span class="op">;</span></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a>    <span class="va">normalized</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="va">upper_x</span><span class="op">,</span> <span class="va">upper_y</span>]<span class="op">;</span></span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>The three preconditions catch invalid inputs:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">normalize_rectangle</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error using normalize_rectangle (line 7)
Rectangle must contain 4 coordinates</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">normalize_rectangle</span>([<span class="fl">1</span><span class="op">,</span><span class="fl">0</span><span class="op">,</span><span class="fl">0</span><span class="op">,</span><span class="fl">0</span><span class="op">,</span><span class="fl">0</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: Rectangle must contain 4 coordinates</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">normalize_rectangle</span>([<span class="fl">1</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="fl">2</span>])<span class="op">;</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>error: Invalid X coordinates</code></pre>
</div>
<p>The post-conditions help us catch bugs by telling us when our
calculations cannot have been correct. For example, if we normalize a
rectangle that is taller than it is wide, everything seems OK:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">normalize_rectangle</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="fl">1.0</span><span class="op">,</span> <span class="fl">5.0</span>])<span class="op">;</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0.00000   0.00000   0.20000   1.00000</code></pre>
</div>
<p>but if we normalize one that’s wider than it is tall, the assertion
is triggered:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="va">normalize_rectangle</span>([<span class="fl">0.0</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="fl">5.0</span><span class="op">,</span> <span class="fl">1.0</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>error: Calculated upper X coordinate invalid</code></pre>
</div>
<p>Re-reading our function, we realize that line 21 should divide
<code>dy</code> by <code>dx</code>. If we had left out the assertion at
the end of the function, we would have created and returned something
that had the right shape as a valid answer, but wasn’t. Detecting and
debugging <em>that</em> would almost certainly have taken more time in
the long run than writing the assertion.</p>
<p>But assertions aren’t just about catching errors: they also help
people understand programs. Each assertion gives the person reading the
program a chance to check (consciously or otherwise) that their
understanding matches what the code is doing.</p>
<p>Most good programmers follow two rules when adding assertions to
their code. The first is, <em>fail early, fail often</em>. The greater
the distance between when and where an error occurs and when it’s
noticed, the harder the error will be to debug, so good code catches
mistakes as early as possible.</p>
<p>The second rule is, <em>turn bugs into assertions or tests</em>. If
you made a mistake in a piece of code, the odds are good that you have
made other mistakes nearby, or will make the same mistake (or a related
one) the next time you change it. Writing assertions to check that you
haven’t <a href="reference.html#regression">regressed</a> (i.e., haven’t
re-introduced an old problem) can save a lot of time in the long run,
and helps to warn people who are reading the code (including your future
self) that this bit is tricky.</p>
<div id="finding-conditions" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="finding-conditions" class="callout-inner">
<h3 class="callout-title">Finding Conditions</h3>
<div class="callout-content">
<p>Suppose you are writing a function called <code>average</code> that
calculates the average of the numbers in a list. What pre-conditions and
post-conditions would you write for it? Compare your answer to your
neighbor’s: can you think of an input array that will pass your tests
but not hers or vice versa?</p>
</div>
</div>
</div>
<p>An assertion checks that something is true at a particular point in
the program. The next step is to check the overall behavior of a piece
of code, i.e., to make sure that it produces the right output when it’s
given a particular input. For example, suppose we need to find where two
or more time series overlap. The range of each time series is
represented as a pair of numbers, which are the time the interval
started and ended. The output is the largest range that they all
include:</p>
<figure><img src="../fig/matlab-overlapping-ranges.png" alt="Overlapping Ranges" class="figure mx-auto d-block"></figure><p>Most novice programmers would solve this problem like this:</p>
<ol style="list-style-type: decimal">
<li>Write a function <code>range_overlap</code>.</li>
<li>Call it interactively on two or three different inputs.</li>
<li>If it produces the wrong answer, fix the function and re-run that
test.</li>
</ol>
<p>This clearly works–after all, thousands of scientists are doing it
right now–but there’s a better way:</p>
<ol style="list-style-type: decimal">
<li>Write a short function for each test.</li>
<li>Write a <code>range_overlap</code> function that should pass those
tests.</li>
<li>If <code>range_overlap</code> produces any wrong answers, fix it and
re-run the test functions.</li>
</ol>
<p>Writing the tests <em>before</em> writing the function they exercise
is called <a href="reference.html#test-driven-development">test-driven
development</a> (TDD). Its advocates believe it produces better code
faster because:</p>
<ol style="list-style-type: decimal">
<li><p>If people write tests after writing the thing to be tested, they
are subject to confirmation bias, i.e., they subconsciously write tests
to show that their code is correct, rather than to find errors.</p></li>
<li><p>Writing tests helps programmers figure out what the function is
actually supposed to do.</p></li>
</ol>
<p>Below are three test functions for <code>range_overlap</code>, but
first we need a brief aside to explain some MATLAB behaviour.</p>
<ol style="list-style-type: decimal">
<li>Argument format required for <code>assert</code>
</li>
</ol>
<p><code>assert</code> requires a scalar logical input argument
(i.e. <code>true</code> (1) or <code>false</code>(0)).</p>
<ol start="2" style="list-style-type: decimal">
<li>Testing for equality between matrices</li>
</ol>
<p>The syntax <code>matA == matB</code> returns a matrix of logical
values. If we just want a <code>true</code> or <code>false</code> answer
for the whole matrix (e.g. to use with <code>assert</code>), we need to
use <code>isequal</code> instead.</p>
<div id="looking-for-help" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="looking-for-help" class="callout-inner">
<h3 class="callout-title">Looking For Help</h3>
<div class="callout-content">
<p>For a more detailed explanation, search the MATLAB help files (or
type <code>doc eq; doc assert</code> at the command prompt).</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co">%TEST_RANGE_OVERLAP   Test script for range_overlap function.</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">% assert(isnan(range_overlap([0.0, 1.0], [5.0, 6.0])))</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">% assert(isnan(range_overlap([0.0, 1.0], [1.0, 2.0])))</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="va">assert</span>(<span class="va">isequal</span>(<span class="va">range_overlap</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">1.0</span>])<span class="op">,</span>[<span class="fl">0</span><span class="op">,</span> <span class="fl">1.0</span>]))</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="va">assert</span>(<span class="va">isequal</span>(<span class="va">range_overlap</span>([<span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span>]<span class="op">,</span> [<span class="fl">2.0</span><span class="op">,</span> <span class="fl">4.0</span>])<span class="op">,</span>[<span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span>]))</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="va">assert</span>(<span class="va">isequal</span>(<span class="va">range_overlap</span>([<span class="fl">0.0</span><span class="op">,</span> <span class="fl">1.0</span>]<span class="op">,</span> [<span class="fl">0.0</span><span class="op">,</span> <span class="fl">2.0</span>]<span class="op">,</span> [<span class="op">-</span><span class="fl">1.0</span><span class="op">,</span> <span class="fl">1.0</span>])<span class="op">,</span>[<span class="fl">0.0</span><span class="op">,</span> <span class="fl">1.0</span>]))</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="va">test_range_overlap</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Undefined function or variable 'range_overlap'.

Error in test_range_overlap (line 5)
assert(isequal(range_overlap([0, 1.0]),[0, 1.0]))</code></pre>
</div>
<p>The error is actually reassuring: we haven’t written
<code>range_overlap</code> yet, so if the tests passed, it would be a
sign that someone else had and that we were accidentally using their
function.</p>
<p>And as a bonus of writing these tests, we’ve implicitly defined what
our inputs and output look like: we expect two or more input arguments,
each of which is a vector with length = 2, and we return a single vector
as output.</p>
<p>Given that <code>range_overlap</code> will have to accept varying
numbers of input arguments, we need to learn how to deal with an unknown
number of input arguments before we can write
<code>range_overlap</code>. Consider the example below from the MATLAB
documentation:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">varlist</span>(<span class="va">varargin</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>   <span class="co">%VARLIST Demonstrate variable number of input arguments</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>   <span class="va">fprintf</span>(<span class="ss">'Number of arguments: %d\n'</span><span class="op">,</span><span class="va">nargin</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>   <span class="va">celldisp</span>(<span class="va">varargin</span>)</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="va">varlist</span>(<span class="va">ones</span>(<span class="fl">3</span>)<span class="op">,</span><span class="ss">'some text'</span><span class="op">,</span><span class="va">pi</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Number of arguments: 3

varargin{1} =
     1     1     1
     1     1     1
     1     1     1

varargin{2} =
some text

varargin{3} =
    3.1416</code></pre>
</div>
<p>MATLAB has a special variable <code>varargin</code> which can be used
as the last parameter in a function definition to represent a variable
number of inputs. Within the function <code>varargin</code> is a
<strong>cell array</strong> containing the input arguments, and the
variable <code>nargin</code> gives the number of input arguments used
during the function call. A <em>cell array</em> is a MATLAB data type
with indexed data containers called cells. Each cell can contain any
type of data, and is indexed using braces, or “curly brackets”
<code>{}</code>.</p>
<div id="variable-number-of-input-arguments" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variable-number-of-input-arguments" class="callout-inner">
<h3 class="callout-title">Variable number of input arguments</h3>
<div class="callout-content">
<p>Using what we have just learned about <code>varargin</code> and
<code>nargin</code> fill in the blanks below to complete the first draft
of our <code>range_overlap</code> function.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">overlap</span> <span class="op">=</span> <span class="va">range_overlap</span>(________)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="co">%RANGE_OVERLAP Return common overlap among a set of [low, high] ranges.</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    <span class="va">lowest</span>  <span class="op">=</span> <span class="op">-</span><span class="va">inf</span><span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    <span class="va">highest</span> <span class="op">=</span> <span class="op">+</span><span class="va">inf</span><span class="op">;</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>    <span class="co">% Loop over input arguments</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>______</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>        <span class="co">% Set range equal to each input argument</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>        <span class="va">range</span>   <span class="op">=</span> ________{<span class="va">i</span>}<span class="op">;</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>        <span class="va">low</span>     <span class="op">=</span> <span class="va">range</span>(<span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>        <span class="va">high</span>    <span class="op">=</span> <span class="va">range</span>(<span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>        <span class="va">lowest</span>  <span class="op">=</span> <span class="va">max</span>(<span class="va">lowest</span><span class="op">,</span> <span class="va">low</span>)<span class="op">;</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>        <span class="va">highest</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">highest</span><span class="op">,</span> <span class="va">high</span>)<span class="op">;</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>    <span class="va">overlap</span> <span class="op">=</span> [<span class="va">lowest</span><span class="op">,</span> <span class="va">highest</span>]<span class="op">;</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">overlap</span> <span class="op">=</span> <span class="va">range_overlap</span>(<span class="va">varargin</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="co">%RANGE_OVERLAP Return common overlap among a set of [low, high] ranges.</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="va">lowest</span>  <span class="op">=</span> <span class="op">-</span><span class="va">inf</span><span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="va">highest</span> <span class="op">=</span> <span class="op">+</span><span class="va">inf</span><span class="op">;</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>    <span class="co">% Loop over input arguments</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">nargin</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>        <span class="co">% Set range equal to each input argument</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>        <span class="va">range</span>   <span class="op">=</span> <span class="va">varargin</span>{<span class="va">i</span>}<span class="op">;</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>        <span class="va">low</span>     <span class="op">=</span> <span class="va">range</span>(<span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>        <span class="va">high</span>    <span class="op">=</span> <span class="va">range</span>(<span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>        <span class="va">lowest</span>  <span class="op">=</span> <span class="va">max</span>(<span class="va">lowest</span><span class="op">,</span> <span class="va">low</span>)<span class="op">;</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>        <span class="va">highest</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">highest</span><span class="op">,</span> <span class="va">high</span>)<span class="op">;</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>    <span class="va">overlap</span> <span class="op">=</span> [<span class="va">lowest</span><span class="op">,</span> <span class="va">highest</span>]<span class="op">;</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have written the function <code>range_overlap</code>,
when we run the tests:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="va">test_range_overlap</span></span></code></pre>
</div>
<p>we shouldn’t see an error.</p>
<p>Something important is missing, though. We don’t have any tests for
the case where the ranges don’t overlap at all, or for the case where
the ranges overlap at a point. We’ll leave this as a final
assignment.</p>
<div id="fixing-code-through-testing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="fixing-code-through-testing" class="callout-inner">
<h3 class="callout-title">Fixing Code Through Testing</h3>
<div class="callout-content">
<p>Fix <code>range_overlap</code>. Uncomment the two commented lines in
<code>test_range_overlap</code>. You’ll see that our objective is to
return a special value: <code>NaN</code> (Not a Number), for the
following cases:</p>
<ul>
<li>The ranges don’t overlap.</li>
<li>The ranges overlap at their endpoints.</li>
</ul>
<p>As you make change to the code, run <code>test_range_overlap</code>
regularly to make sure you aren’t breaking anything. Once you’re done,
running <code>test_range_overlap</code> shouldn’t raise any errors.</p>
<p>Hint: read about the <code>isnan</code> function in the help files to
make sure you understand what these first two lines are doing.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">MATLAB<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode matlab" tabindex="0"><code class="sourceCode matlab"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">function</span> <span class="va">overlap</span> <span class="op">=</span> <span class="va">range_overlap</span>(<span class="va">varargin</span>)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>    <span class="co">%RANGE_OVERLAP Return common overlap among a set of [low, high] ranges.</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>    <span class="va">lowest</span> <span class="op">=</span> <span class="op">-</span><span class="va">inf</span><span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>    <span class="va">highest</span> <span class="op">=</span> <span class="op">+</span><span class="va">inf</span><span class="op">;</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>    <span class="co">% Loop over input arguments</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">nargin</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>        <span class="co">% Set range equal to each input argument</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>        <span class="va">range</span>   <span class="op">=</span> <span class="va">varargin</span>{<span class="va">i</span>}<span class="op">;</span></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>        <span class="va">low</span>     <span class="op">=</span> <span class="va">range</span>(<span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>        <span class="va">high</span>    <span class="op">=</span> <span class="va">range</span>(<span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>        <span class="va">lowest</span>  <span class="op">=</span> <span class="va">max</span>(<span class="va">lowest</span><span class="op">,</span> <span class="va">low</span>)<span class="op">;</span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>        <span class="va">highest</span> <span class="op">=</span> <span class="va">min</span>(<span class="va">highest</span><span class="op">,</span> <span class="va">high</span>)<span class="op">;</span></span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>        </span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>        <span class="co">% Catch non-overlapping ranges</span></span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a>	    <span class="kw">if</span> <span class="va">low</span> <span class="op">&gt;=</span> <span class="va">highest</span> <span class="op">||</span> <span class="va">high</span><span class="op">&lt;=</span><span class="va">lowest</span></span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>            <span class="va">overlap</span> <span class="op">=</span> <span class="va">NaN</span><span class="op">;</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>            <span class="kw">return</span></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>	    <span class="kw">end</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a>    <span class="va">overlap</span> <span class="op">=</span> [<span class="va">lowest</span><span class="op">,</span> <span class="va">highest</span>]<span class="op">;</span></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="debugging-strategies">Debugging strategies<a class="anchor" aria-label="anchor" href="#debugging-strategies"></a>
</h2>
<hr class="half-width">
<p>Once testing has uncovered problems, the next step is to fix them.
Many novices do this by making more-or-less random changes to their code
until it seems to produce the right answer, but that’s very inefficient
(and the result is usually only correct for the one case they’re
testing). The more experienced a programmer is, the more systematically
they debug, and most follow some variation on the rules explained
below.</p>
<p>The first step in debugging something is to <em>know what it’s
supposed to do</em>. “My program doesn’t work” isn’t good enough: in
order to diagnose and fix problems, we need to be able to tell correct
output from incorrect. If we can write a test case for the failing
case—i.e., if we can assert that with <em>these</em> inputs, the
function should produce <em>that</em> result—then we’re ready to start
debugging. If we can’t, then we need to figure out how we’re going to
know when we’ve fixed things.</p>
<p>But writing test cases for scientific software is frequently harder
than writing test cases for commercial applications, because if we knew
what the output of the scientific code was supposed to be, we wouldn’t
be running the software: we’d be writing up our results and moving on to
the next program. In practice, scientists tend to do the following:</p>
<ol style="list-style-type: decimal">
<li><p><em>Test with simplified data.</em> Before doing statistics on a
real data set, we should try calculating statistics for a single record,
for two identical records, for two records whose values are one step
apart, or for some other case where we can calculate the right answer by
hand.</p></li>
<li><p><em>Test a simplified case.</em> If our program is supposed to
simulate magnetic eddies in rapidly-rotating blobs of supercooled
helium, our first test should be a blob of helium that isn’t rotating,
and isn’t being subjected to any external electromagnetic fields.
Similarly, if we’re looking at the effects of climate change on
speciation, our first test should hold temperature, precipitation, and
other factors constant.</p></li>
<li><p><em>Compare to an oracle.</em> A <a href="reference.html#test-oracle">test oracle</a> is
something—experimental data, an older program whose results are trusted,
or even a human expert—against which we can compare the results of our
new program. If we have a test oracle, we should store its output for
particular cases so that we can compare it with our new results as often
as we like without re-running that program.</p></li>
<li><p><em>Check conservation laws.</em> Mass, energy, and other
quantities are conserved in physical systems, so they should be in
programs as well. Similarly, if we are analyzing patient data, the
number of records should either stay the same or decrease as we move
from one analysis to the next (since we might throw away outliers or
records with missing values). If “new” patients start appearing out of
nowhere as we move through our pipeline, it’s probably a sign that
something is wrong.</p></li>
<li><p><em>Visualize.</em> Data analysts frequently use simple
visualizations to check both the science they’re doing and the
correctness of their code (just as we did in the <a href="01-intro.html">opening lesson</a> of this tutorial). This should
only be used for debugging as a last resort, though, since it’s very
hard to compare two visualizations automatically.</p></li>
</ol>
<p>We can only debug something when it fails, so the second step is
always to find a test case that <em>makes it fail every time</em>. The
“every time” part is important because few things are more frustrating
than debugging an intermittent problem: if we have to call a function a
dozen times to get a single failure, the odds are good that we’ll scroll
past the failure when it actually occurs.</p>
<p>As part of this, it’s always important to check that our code is
“plugged in”, i.e., that we’re actually exercising the problem that we
think we are. Every programmer has spent hours chasing a bug, only to
realize that they were actually calling their code on the wrong data set
or with the wrong configuration settings, or are using the wrong version
of the software entirely. Mistakes like these are particularly likely to
happen when we’re tired, frustrated, and up against a deadline, which is
one of the reasons late-night (or overnight) coding sessions are almost
never worthwhile.</p>
<p>If it takes 20 minutes for the bug to surface, we can only do three
experiments an hour. That doesn’t mean we’ll get less data in more time:
we’re also more likely to be distracted by other things as we wait for
our program to fail, which means the time we <em>are</em> spending on
the problem is less focused. It’s therefore critical to <em>make it fail
fast</em>.</p>
<p>As well as making the program fail fast in time, we want to make it
fail fast in space, i.e., we want to localize the failure to the
smallest possible region of code:</p>
<ol style="list-style-type: decimal">
<li><p>The smaller the gap between cause and effect, the easier the
connection is to find. Many programmers therefore use a divide and
conquer strategy to find bugs, i.e., if the output of a function is
wrong, they check whether things are OK in the middle, then concentrate
on either the first or second half, and so on.</p></li>
<li><p>N things can interact in N<sup>2</sup> different ways, so every
line of code that <em>isn’t</em> run as part of a test means more than
one thing we don’t need to worry about.</p></li>
</ol>
<p>Replacing random chunks of code is unlikely to do much good. (After
all, if you got it wrong the first time, you’ll probably get it wrong
the second and third as well.) Good programmers therefore <em>change one
thing at a time</em>, for a reason. They are either trying to gather
more information (“is the bug still there if we change the order of the
loops?”) or test a fix (“can we make the bug go away by sorting our data
before processing it?”).</p>
<p>Every time we make a change, however small, we should re-run our
tests immediately, because the more things we change at once, the harder
it is to know what’s responsible for what (those N<sup>2</sup>
interactions again). And we should re-run <em>all</em> of our tests:
more than half of fixes made to code introduce (or re-introduce) bugs,
so re-running all of our tests tells us whether we have <a href="reference.html#regression">regressed</a>.</p>
<p>Good scientists keep track of what they’ve done so that they can
reproduce their work, and so that they don’t waste time repeating the
same experiments or running ones whose results won’t be interesting.
Similarly, debugging works best when we <em>keep track of what we’ve
done</em> and how well it worked. If we find ourselves asking, “Did left
followed by right with an odd number of lines cause the crash? Or was it
right followed by left? Or was I using an even number of lines?” then
it’s time to step away from the computer, take a deep breath, and start
working more systematically.</p>
<p>Records are particularly useful when the time comes to ask for help.
People are more likely to listen to us when we can explain clearly what
we did, and we’re better able to give them the information they need to
be useful.</p>
<p>Version control is often used to reset software to a known state
during debugging, and to explore recent changes to code that might be
responsible for bugs. In particular, most version control systems have a
<code>blame</code> command that will show who last changed particular
lines of code…</p>
<p>And speaking of help: if we can’t find a bug in 10 minutes, we should
<em>be humble</em> and ask for help. Just explaining the problem aloud
is often useful, since hearing what we’re thinking helps us spot
inconsistencies and hidden assumptions.</p>
<p>Asking for help also helps alleviate confirmation bias. If we have
just spent an hour writing a complicated program, we want it to work, so
we’re likely to keep telling ourselves why it should, rather than
searching for the reason it doesn’t. People who aren’t emotionally
invested in the code can be more objective, which is why they’re often
able to spot the simple mistakes we have overlooked.</p>
<p>Part of being humble is learning from our mistakes. Programmers tend
to get the same things wrong over and over: either they don’t understand
the language and libraries they’re working with, or their model of how
things work is wrong. In either case, taking note of why the error
occurred and checking for it next time quickly turns into not making the
mistake at all.</p>
<p>And that is what makes us most productive in the long run. As the
saying goes, <em>A week of hard work can sometimes save you an hour of
thought</em>. If we train ourselves to avoid making some kinds of
mistakes, to break our code into modular, testable chunks, and to turn
every assumption (or mistake) into an assertion, it will actually take
us <em>less</em> time to produce working programs, not more.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use assertions to catch errors, and to document what behavior is
expected.</li>
<li>Write tests <em>before</em> code.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/swcarpentry/matlab-novice-inflammation/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/swcarpentry/matlab-novice-inflammation/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/matlab-novice-inflammation/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/matlab-novice-inflammation/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/matlab-novice-inflammation/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/matlab-novice-inflammation/instructor/aio.html",
  "identifier": "https://swcarpentry.github.io/matlab-novice-inflammation/instructor/aio.html",
  "dateCreated": "2014-12-12",
  "dateModified": "2025-04-15",
  "datePublished": "2025-04-15"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

